2013-09-24 10:53:50,312 [11312] DEBUG Servicesys_user - 获取实体对象
2013-09-24 10:53:50,341 [11312] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'lhs'and Password =  'lhs'and IsEnable =  'True'
2013-09-24 10:53:50,462 [11312] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'lhs' 
2013-09-24 10:53:50,529 [11312] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('lhs','刘会胜','LHS-PC','ILData[0]/localhost','福建省厦门市','2013-09-24 10:53:50')
2013-09-24 10:53:50,535 [11312] DEBUG Servicemms_project - 获取实体对象
2013-09-24 10:53:50,540 [11312] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2013-09-24 10:53:50,595 [11932] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 10:53:52,019 [6984] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 10:54:39,189 [14964] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-09-24 10:54:45,126 [10480] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-09-24 10:54:45,136 [10668] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2013-09-24 10:54:47,290 [11228] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 10:56:28,530 [14964] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:03:33,806 [10180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:03:33,880 [10180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:03:33,887 [10180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:03:33,892 [10180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:03:34,176 [11884] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/code/Index','/Sys/code')
2013-09-24 11:03:36,537 [10648] DEBUG Servicesys_codeType - 获取动态列表
2013-09-24 11:03:36,538 [11496] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:36,552 [10648] DEBUG Sys - select sys_codeType.* from sys_codeType order by Seq,CodeType
2013-09-24 11:03:36,558 [11496] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2013-09-24 11:03:36,592 [11496] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2013-09-24 11:03:39,962 [5928] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:39,964 [5928] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2013-09-24 11:03:39,967 [5928] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2013-09-24 11:03:43,822 [11884] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:43,823 [11884] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PartAttr' order by Seq
2013-09-24 11:03:43,826 [11884] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PartAttr' ) tb_temp
2013-09-24 11:03:44,678 [6984] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:44,679 [6984] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2013-09-24 11:03:44,679 [6984] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2013-09-24 11:03:46,482 [9912] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:46,482 [9912] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'Sex' order by Seq
2013-09-24 11:03:46,485 [9912] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'Sex' ) tb_temp
2013-09-24 11:03:47,344 [5928] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:47,345 [5928] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'MaterialUse' order by Seq
2013-09-24 11:03:47,349 [5928] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'MaterialUse' ) tb_temp
2013-09-24 11:03:47,994 [10648] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:47,994 [10648] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'Sex' order by Seq
2013-09-24 11:03:47,995 [10648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'Sex' ) tb_temp
2013-09-24 11:03:48,726 [9912] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:03:48,727 [9912] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2013-09-24 11:03:48,727 [9912] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2013-09-24 11:04:00,358 [8816] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:04:00,359 [8816] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'Sex' order by Seq
2013-09-24 11:04:00,359 [8816] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'Sex' ) tb_temp
2013-09-24 11:04:00,953 [10648] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:04:00,953 [10648] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2013-09-24 11:04:00,954 [10648] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2013-09-24 11:04:07,897 [6984] DEBUG Servicesys_code - 获取新主键
2013-09-24 11:04:07,900 [6984] DEBUG Sys - select isnull(max(Code),0) from sys_code  where 1 = 1 
2013-09-24 11:04:52,392 [11496] DEBUG Servicesys_code - 获取新主键
2013-09-24 11:04:52,393 [11496] DEBUG Sys - select isnull(max(Code),0) from sys_code  where 1 = 1 
2013-09-24 11:05:08,053 [10648] DEBUG Servicesys_code - 编辑记录
2013-09-24 11:05:08,071 [10648] DEBUG Servicesys_code - 获取动态对象
2013-09-24 11:05:08,074 [10648] DEBUG Sys - select sys_code.* from sys_code where  Code =  '107'
2013-09-24 11:05:08,105 [10648] DEBUG Sys - insert into sys_code([CodeType],[Code],[Value],[Text],[ParentCode],[Description],[IsEnable],[IsDefault],[Seq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('107'Type,'107','UserType1','人员类型1','','','true','false','','刘会胜','2013-09-24 11:05:08','刘会胜','2013-09-24 11:05:08')
2013-09-24 11:05:08,120 [10648] DEBUG Servicesys_code - 获取动态对象
2013-09-24 11:05:08,121 [10648] DEBUG Sys - select sys_code.* from sys_code where  Code =  '108'
2013-09-24 11:05:08,122 [10648] DEBUG Sys - insert into sys_code([CodeType],[Code],[Value],[Text],[ParentCode],[Description],[IsEnable],[IsDefault],[Seq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('108'Type,'108','UserType2','人员类型2','','','false','false','','刘会胜','2013-09-24 11:05:08','刘会胜','2013-09-24 11:05:08')
2013-09-24 11:05:09,374 [3364] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:05:09,374 [3364] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PartAttr' order by Seq
2013-09-24 11:05:09,375 [3364] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PartAttr' ) tb_temp
2013-09-24 11:05:10,111 [11884] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:05:10,112 [11884] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2013-09-24 11:05:10,112 [11884] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2013-09-24 11:05:18,296 [6984] DEBUG Servicesys_codeType - 获取动态列表
2013-09-24 11:05:18,297 [6984] DEBUG Sys - select top 10 sys_codeType.* from sys_codeType order by Seq,CodeType
2013-09-24 11:05:18,298 [6984] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2013-09-24 11:05:33,842 [8816] DEBUG Servicesys_code - 编辑记录
2013-09-24 11:05:33,842 [8816] DEBUG Servicesys_code - 获取动态对象
2013-09-24 11:05:33,843 [8816] DEBUG Sys - select sys_code.* from sys_code where  Code =  '108'
2013-09-24 11:05:33,857 [8816] DEBUG Sys - update sys_code set [CodeType] = 'PersonType', [Value] = 'PersonType2', [Text] = '人员类型2', [ParentCode] = '', [Description] = '', [IsEnable] = 'false', [IsDefault] = 'false', [Seq] = '', [UpdatePerson] = '刘会胜', [UpdateDate] = '2013-09-24 11:05:33' where  Code =  '108'
2013-09-24 11:05:33,864 [8816] DEBUG Servicesys_code - 获取动态对象
2013-09-24 11:05:33,865 [8816] DEBUG Sys - select sys_code.* from sys_code where  Code =  '107'
2013-09-24 11:05:33,866 [8816] DEBUG Sys - update sys_code set [CodeType] = 'PersonType', [Value] = 'PersonType1', [Text] = '人员类型1', [ParentCode] = '', [Description] = '', [IsEnable] = 'true', [IsDefault] = 'false', [Seq] = '', [UpdatePerson] = '刘会胜', [UpdateDate] = '2013-09-24 11:05:33' where  Code =  '107'
2013-09-24 11:06:51,077 [5928] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:06:51,078 [5928] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PartAttr' order by Seq
2013-09-24 11:06:51,079 [5928] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PartAttr' ) tb_temp
2013-09-24 11:06:52,131 [9912] DEBUG Servicesys_code - 获取实体列表
2013-09-24 11:06:52,132 [9912] DEBUG Sys - select top 20 sys_code.* from sys_code where  CodeType =  'PersonType' order by Seq
2013-09-24 11:06:52,132 [9912] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where  CodeType =  'PersonType' ) tb_temp
2013-09-24 11:07:01,301 [5928] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:07:01,357 [5928] DEBUG Mms - sp_pkeys 'REMP_Staff'
2013-09-24 11:09:51,761 [10416] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:09:51,794 [10416] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:09:51,801 [10416] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:09:51,802 [10416] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:10:01,796 [8816] DEBUG Servicesys_user - 获取实体对象
2013-09-24 11:10:01,815 [8816] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'lhs'and Password =  'lhs'and IsEnable =  'True'
2013-09-24 11:10:01,905 [8816] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'lhs' 
2013-09-24 11:10:01,958 [8816] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('lhs','刘会胜','LHS-PC','ILData[0]/localhost','福建省厦门市','2013-09-24 11:10:01')
2013-09-24 11:10:01,961 [8816] DEBUG Servicemms_project - 获取实体对象
2013-09-24 11:10:01,962 [8816] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2013-09-24 11:10:02,168 [12008] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:10:06,075 [7628] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:10:10,583 [12132] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-09-24 11:10:12,078 [12008] DEBUG Servicesys_menu - 获取动态列表
2013-09-24 11:10:12,079 [12008] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-09-24 11:11:13,841 [9984] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:11:13,875 [9984] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:11:13,882 [9984] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:11:13,882 [9984] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:11:14,487 [10948] DEBUG Servicesys_menu - 编辑记录
2013-09-24 11:11:14,525 [10948] DEBUG Servicesys_menu - 获取动态对象
2013-09-24 11:11:14,544 [10948] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '4620a34a-b5c8-4f95-9290-058b371d91c8'
2013-09-24 11:11:14,633 [10948] DEBUG Sys - insert into 
        sys_menu
    ([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq]) values('员工管理','9960','98','icon-user_b','/mms/staff','true','true','')
2013-09-24 11:11:14,675 [10948] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('lhs','刘会胜','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[{"_id":"4620a34a-b5c8-4f95-9290-058b371d91c8","MenuName":"员工管理","MenuCode":"9960","ParentCode":"98","IconClass":"icon-user_b","URL":"/mms/staff","IsVisible":"true","IsEnable":"true","MenuSeq":""}],"updated":[],"_changed":true}}','2013-09-24 11:11:14')
2013-09-24 11:11:15,663 [11996] DEBUG Servicesys_menu - 获取动态列表
2013-09-24 11:11:15,665 [11996] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-09-24 11:11:24,534 [9356] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2013-09-24 11:11:48,780 [9356] DEBUG Servicesys_menu - 设置菜单按钮
2013-09-24 11:11:48,785 [9356] DEBUG Sys - delete from sys_menuButtonMap where [MenuCode] = '9960'
2013-09-24 11:11:48,788 [9356] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','add')
2013-09-24 11:11:48,791 [9356] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','edit')
2013-09-24 11:11:48,793 [9356] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','delete')
2013-09-24 11:11:48,796 [9356] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','refresh')
2013-09-24 11:11:48,798 [9356] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','export')
2013-09-24 11:11:48,799 [9356] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','audit')
2013-09-24 11:11:52,482 [14164] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-09-24 11:11:52,497 [14164] DEBUG Servicesys_user - 获取动态列表
2013-09-24 11:11:52,497 [14164] DEBUG Sys - select UserCode,UserName from sys_user
2013-09-24 11:11:52,499 [14164] DEBUG Servicesys_organize - 获取动态列表
2013-09-24 11:11:52,500 [14164] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-09-24 11:11:56,370 [10948] DEBUG Servicesys_role - 获取实体列表
2013-09-24 11:11:56,376 [10948] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-09-24 11:11:58,621 [9356] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-09-24 11:11:58,625 [9356] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-09-24 11:11:58,760 [9356] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-09-24 11:11:58,921 [14164] DEBUG Servicesys_permission - 获取动态列表
2013-09-24 11:11:58,921 [14164] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-09-24 11:12:19,381 [14164] DEBUG Servicesys_role - 修改角色菜单权限
2013-09-24 11:12:19,382 [14164] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-09-24 11:12:19,385 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-09-24 11:12:19,387 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-09-24 11:12:19,390 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-09-24 11:12:19,390 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-09-24 11:12:19,391 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-09-24 11:12:19,391 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-09-24 11:12:19,392 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-09-24 11:12:19,392 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-09-24 11:12:19,393 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-09-24 11:12:19,393 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-09-24 11:12:19,393 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-09-24 11:12:19,394 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-09-24 11:12:19,394 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-09-24 11:12:19,395 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-09-24 11:12:19,395 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-09-24 11:12:19,398 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-09-24 11:12:19,398 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-09-24 11:12:19,399 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-09-24 11:12:19,399 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-09-24 11:12:19,400 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-09-24 11:12:19,400 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-09-24 11:12:19,401 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-09-24 11:12:19,401 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-09-24 11:12:19,402 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-09-24 11:12:19,402 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-09-24 11:12:19,402 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-09-24 11:12:19,403 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-09-24 11:12:19,403 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-09-24 11:12:19,404 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-09-24 11:12:19,404 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-09-24 11:12:19,404 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-09-24 11:12:19,405 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-09-24 11:12:19,405 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-09-24 11:12:19,406 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-09-24 11:12:19,406 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-09-24 11:12:19,406 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-09-24 11:12:19,407 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-09-24 11:12:19,407 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-09-24 11:12:19,407 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-09-24 11:12:19,408 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-09-24 11:12:19,408 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-09-24 11:12:19,409 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-09-24 11:12:19,409 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-09-24 11:12:19,409 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-09-24 11:12:19,410 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-09-24 11:12:19,410 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-09-24 11:12:19,410 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-09-24 11:12:19,411 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-09-24 11:12:19,411 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-09-24 11:12:19,411 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-09-24 11:12:19,412 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-09-24 11:12:19,412 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-09-24 11:12:19,413 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-09-24 11:12:19,413 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2013-09-24 11:12:19,414 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2013-09-24 11:12:19,414 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-09-24 11:12:19,415 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-09-24 11:12:19,415 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2013-09-24 11:12:19,416 [14164] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2013-09-24 11:12:19,453 [14164] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-09-24 11:12:19,454 [14164] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-09-24 11:12:19,457 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2013-09-24 11:12:19,460 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2013-09-24 11:12:19,463 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2013-09-24 11:12:19,466 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2013-09-24 11:12:19,467 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2013-09-24 11:12:19,468 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2013-09-24 11:12:19,468 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2013-09-24 11:12:19,485 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','export')
2013-09-24 11:12:19,485 [14164] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2013-09-24 11:12:19,529 [14164] DEBUG Servicesys_role - 修改角色数据权限
2013-09-24 11:12:19,530 [14164] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-09-24 11:12:19,532 [14164] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2013-09-24 11:12:19,581 [14164] DEBUG Servicesys_role - 修改角色数据列权限
2013-09-24 11:12:19,585 [14164] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-09-24 11:12:19,596 [14164] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-09-24 11:12:24,331 [14164] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:12:30,127 [9356] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:12:31,226 [9356] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-09-24 11:12:31,228 [9356] DEBUG Servicesys_user - 获取动态列表
2013-09-24 11:12:31,229 [9356] DEBUG Sys - select UserCode,UserName from sys_user
2013-09-24 11:12:31,229 [9356] DEBUG Servicesys_organize - 获取动态列表
2013-09-24 11:12:31,229 [9356] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-09-24 11:12:31,941 [11996] DEBUG Servicesys_role - 获取实体列表
2013-09-24 11:12:31,941 [11996] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-09-24 11:12:34,510 [12008] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:12:34,520 [12008] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:12:34,521 [12008] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:12:35,454 [12008] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:12:35,458 [12008] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:12:35,491 [12008] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:12:35,492 [12008] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:13:38,432 [9984] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:13:38,465 [9984] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:13:38,472 [9984] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:13:38,473 [9984] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:13:38,786 [8532] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:13:38,808 [8532] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:13:38,826 [8532] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:13:39,874 [8532] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:13:39,879 [8532] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:13:39,885 [8532] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:13:39,886 [8532] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:13:54,586 [8768] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-09-24 11:13:56,383 [7380] DEBUG Servicesys_menu - 获取动态列表
2013-09-24 11:13:56,384 [7380] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-09-24 11:14:01,091 [14420] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2013-09-24 11:14:04,034 [8768] DEBUG Servicesys_menu - 设置菜单按钮
2013-09-24 11:14:04,043 [8768] DEBUG Sys - delete from sys_menuButtonMap where [MenuCode] = '9960'
2013-09-24 11:14:04,050 [8768] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','add')
2013-09-24 11:14:04,050 [8768] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','edit')
2013-09-24 11:14:04,051 [8768] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','delete')
2013-09-24 11:14:04,051 [8768] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','refresh')
2013-09-24 11:14:04,052 [8768] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','download')
2013-09-24 11:14:04,055 [8768] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','audit')
2013-09-24 11:18:16,569 [14420] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2013-09-24 11:18:16,585 [8532] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:18:19,532 [4812] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Department')
ORDER BY sys.columns.column_id
2013-09-24 11:18:20,439 [8768] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:18:53,995 [8340] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:18:54,053 [8340] DEBUG Mms - sp_pkeys 'REMP_Staff'
2013-09-24 11:20:39,452 [10416] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:39,485 [10416] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:39,493 [10416] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:39,494 [10416] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:47,775 [10452] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:47,809 [10452] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:47,816 [10452] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:47,816 [10452] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:20:48,374 [4812] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:20:53,211 [8520] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:20:58,495 [10380] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:20:59,500 [10380] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:20:59,504 [10380] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:20:59,509 [10380] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:20:59,510 [10380] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:21:05,097 [8724] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-09-24 11:21:06,605 [10340] DEBUG Servicesys_menu - 获取动态列表
2013-09-24 11:21:06,622 [10340] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-09-24 11:21:12,042 [8724] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2013-09-24 11:21:18,023 [10380] DEBUG Servicesys_menu - 设置菜单按钮
2013-09-24 11:21:18,033 [10380] DEBUG Sys - delete from sys_menuButtonMap where [MenuCode] = '9960'
2013-09-24 11:21:18,040 [10380] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','add')
2013-09-24 11:21:18,040 [10380] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','edit')
2013-09-24 11:21:18,041 [10380] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','delete')
2013-09-24 11:21:18,042 [10380] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','refresh')
2013-09-24 11:21:18,042 [10380] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','download')
2013-09-24 11:21:18,043 [10380] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('9960','audit')
2013-09-24 11:21:23,571 [8520] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2013-09-24 11:21:24,409 [4812] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-09-24 11:21:24,414 [4812] DEBUG Servicesys_user - 获取动态列表
2013-09-24 11:21:24,414 [4812] DEBUG Sys - select UserCode,UserName from sys_user
2013-09-24 11:21:24,415 [4812] DEBUG Servicesys_organize - 获取动态列表
2013-09-24 11:21:24,416 [4812] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-09-24 11:21:25,170 [13404] DEBUG Servicesys_permission - 获取动态列表
2013-09-24 11:21:25,171 [13404] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2013-09-24 11:21:26,094 [10380] DEBUG Servicesys_role - 获取实体列表
2013-09-24 11:21:26,101 [10380] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-09-24 11:21:28,641 [8340] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-09-24 11:21:28,643 [8340] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-09-24 11:21:28,746 [8340] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-09-24 11:21:28,959 [10380] DEBUG Servicesys_permission - 获取动态列表
2013-09-24 11:21:28,959 [10380] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-09-24 11:21:40,761 [8520] DEBUG Servicesys_role - 修改角色菜单权限
2013-09-24 11:21:40,762 [8520] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-09-24 11:21:40,763 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-09-24 11:21:40,764 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-09-24 11:21:40,764 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-09-24 11:21:40,765 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-09-24 11:21:40,765 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-09-24 11:21:40,766 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-09-24 11:21:40,766 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-09-24 11:21:40,767 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-09-24 11:21:40,767 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-09-24 11:21:40,767 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-09-24 11:21:40,768 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-09-24 11:21:40,768 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-09-24 11:21:40,769 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-09-24 11:21:40,769 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-09-24 11:21:40,770 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-09-24 11:21:40,770 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-09-24 11:21:40,771 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-09-24 11:21:40,771 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-09-24 11:21:40,771 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-09-24 11:21:40,772 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-09-24 11:21:40,772 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-09-24 11:21:40,773 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-09-24 11:21:40,773 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-09-24 11:21:40,774 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-09-24 11:21:40,774 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-09-24 11:21:40,774 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-09-24 11:21:40,775 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-09-24 11:21:40,775 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-09-24 11:21:40,776 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-09-24 11:21:40,776 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-09-24 11:21:40,777 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-09-24 11:21:40,777 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-09-24 11:21:40,778 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-09-24 11:21:40,778 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-09-24 11:21:40,779 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-09-24 11:21:40,779 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-09-24 11:21:40,780 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-09-24 11:21:40,780 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-09-24 11:21:40,780 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-09-24 11:21:40,781 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-09-24 11:21:40,781 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-09-24 11:21:40,782 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-09-24 11:21:40,782 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-09-24 11:21:40,783 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-09-24 11:21:40,783 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-09-24 11:21:40,783 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-09-24 11:21:40,784 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-09-24 11:21:40,784 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-09-24 11:21:40,785 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-09-24 11:21:40,785 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-09-24 11:21:40,786 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-09-24 11:21:40,786 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-09-24 11:21:40,787 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-09-24 11:21:40,787 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2013-09-24 11:21:40,788 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2013-09-24 11:21:40,788 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-09-24 11:21:40,789 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-09-24 11:21:40,789 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2013-09-24 11:21:40,790 [8520] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2013-09-24 11:21:40,829 [8520] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-09-24 11:21:40,830 [8520] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-09-24 11:21:40,831 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2013-09-24 11:21:40,831 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2013-09-24 11:21:40,832 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2013-09-24 11:21:40,832 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2013-09-24 11:21:40,833 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2013-09-24 11:21:40,833 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2013-09-24 11:21:40,834 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2013-09-24 11:21:40,834 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2013-09-24 11:21:40,838 [8520] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2013-09-24 11:21:40,877 [8520] DEBUG Servicesys_role - 修改角色数据权限
2013-09-24 11:21:40,878 [8520] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-09-24 11:21:40,879 [8520] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2013-09-24 11:21:40,923 [8520] DEBUG Servicesys_role - 修改角色数据列权限
2013-09-24 11:21:40,926 [8520] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-09-24 11:21:40,935 [8520] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-09-24 11:21:44,985 [8520] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:21:45,017 [8520] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:21:45,018 [8520] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:21:45,019 [8520] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:21:45,020 [8520] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:21:45,866 [10340] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:21:45,866 [10340] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:21:45,931 [10340] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:22:14,458 [10340] ERROR /api/Mms/Staff - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法将类型“System.Dynamic.ExpandoObject”隐式转换为“System.Collections.Generic.List<object>”
   在 CallSite.Target(Closure , CallSite , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.Get(RequestWrapper query) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 76
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-09-24 11:22:30,443 [12892] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:22:30,476 [12892] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:22:30,483 [12892] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:22:30,484 [12892] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:22:31,036 [14600] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:22:35,993 [12960] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:22:44,810 [8692] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:22:45,813 [8692] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:22:45,817 [8692] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:22:45,821 [8692] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:22:45,822 [8692] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:22:46,685 [6340] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:22:46,700 [6340] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:22:46,775 [6340] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:23:08,222 [12960] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:24:30,700 [3260] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:24:43,430 [12960] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:25:19,222 [10340] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:26:06,617 [12960] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:26:32,154 [12960] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:26:34,427 [8532] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:26:35,018 [12960] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:26:39,518 [8692] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:27:21,034 [3260] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:27:27,113 [3260] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:27:38,737 [12960] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:27:38,797 [12960] DEBUG Mms - sp_pkeys 'REMP_Staff'
2013-09-24 11:29:49,764 [10340] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:31:38,375 [10180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:31:38,405 [10180] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:31:38,412 [10180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:31:38,412 [10180] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:31:38,945 [13440] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:31:38,957 [13440] DEBUG Mms - sp_pkeys 'REMP_Change'
2013-09-24 11:31:41,083 [13440] ERROR /api/sys/generator - System.ArgumentOutOfRangeException: 索引超出范围。必须为非负值并小于集合大小。
参数名: index
   在 System.ThrowHelper.ThrowArgumentOutOfRangeException()
   在 System.Collections.Generic.List`1.get_Item(Int32 index)
   在 Newtonsoft.Json.Linq.JContainer.GetItem(Int32 index)
   在 CallSite.Target(Closure , CallSite , Object , Int32 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 CompiledRazorTemplates.Dynamic.aaccbbacdffbfaade.Execute()
   在 RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context) 位置 c:\_git\RazorEngine\src\Core\RazorEngine.Core\Templating\TemplateBase.cs:行号 126
   在 RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag) 位置 c:\_git\RazorEngine\src\Core\RazorEngine.Core\Templating\TemplateService.cs:行号 608
   在 RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName) 位置 c:\_git\RazorEngine\src\Core\RazorEngine.Core\Templating\TemplateService.cs:行号 437
   在 RazorEngine.Razor.Parse[T](String razorTemplate, T model) 位置 c:\_git\RazorEngine\src\Core\RazorEngine.Core\Razor.cs:行号 263
   在 Zephyr.Areas.Sys.Controllers.GeneratorApiController.Post(JToken data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Controllers\GeneratorController.cs:行号 103
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-09-24 11:31:49,480 [12948] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:31:52,664 [13440] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 11:31:52,670 [13440] DEBUG Mms - sp_pkeys 'REMP_Change'
2013-09-24 11:31:59,770 [3260] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Department')
ORDER BY sys.columns.column_id
2013-09-24 11:32:00,443 [13736] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 11:32:01,057 [3280] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Department')
ORDER BY sys.columns.column_id
2013-09-24 11:32:03,431 [12948] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Department')
ORDER BY sys.columns.column_id
2013-09-24 11:32:03,435 [12948] DEBUG Mms - sp_pkeys 'REMP_Department'
2013-09-24 11:34:11,367 [8428] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:34:11,400 [8428] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:34:11,407 [8428] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:34:11,407 [8428] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:34:11,933 [13440] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:34:16,816 [8908] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:34:24,661 [10144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:34:24,678 [10144] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:34:24,698 [10144] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:34:25,769 [10144] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:34:25,773 [10144] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:34:25,777 [10144] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:34:25,778 [10144] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:34:26,657 [13440] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:34:26,658 [13440] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:34:26,735 [13440] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:34:29,926 [8908] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:34:34,467 [8908] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-09-24 11:34:35,970 [10144] DEBUG Servicesys_menu - 获取动态列表
2013-09-24 11:34:35,971 [10144] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-09-24 11:35:22,249 [10144] DEBUG Servicesys_menu - 编辑记录
2013-09-24 11:35:22,268 [10144] DEBUG Servicesys_menu - 获取动态对象
2013-09-24 11:35:22,272 [10144] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '577fa65f-95b7-423c-bf2e-9c81ddc1f5a3'
2013-09-24 11:35:22,291 [10144] DEBUG Sys - insert into 
        sys_menu
    ([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq]) values('员工编辑','9961','98','','/mms/staff/edit','false','true','')
2013-09-24 11:35:22,319 [10144] DEBUG Sys - insert into sys_log([UserCode],[UserName],[Position],[Target],[Type],[Message],[Date]) values('lhs','刘会胜','api/mms/send','菜单数据','修改','{"list":{"deleted":[],"inserted":[{"_id":"577fa65f-95b7-423c-bf2e-9c81ddc1f5a3","MenuName":"员工编辑","MenuCode":"9961","ParentCode":"98","IconClass":"","URL":"/mms/staff/edit","IsVisible":"false","IsEnable":"true","MenuSeq":""}],"updated":[],"_changed":true}}','2013-09-24 11:35:22')
2013-09-24 11:35:23,149 [11908] DEBUG Servicesys_menu - 获取动态列表
2013-09-24 11:35:23,150 [11908] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-09-24 11:35:26,893 [8908] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:35:29,371 [8908] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:35:33,876 [10144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-09-24 11:35:33,887 [10144] DEBUG Servicesys_user - 获取动态列表
2013-09-24 11:35:33,887 [10144] DEBUG Sys - select UserCode,UserName from sys_user
2013-09-24 11:35:33,889 [10144] DEBUG Servicesys_organize - 获取动态列表
2013-09-24 11:35:33,889 [10144] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-09-24 11:35:35,337 [224] DEBUG Servicesys_role - 获取实体列表
2013-09-24 11:35:35,343 [224] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-09-24 11:35:39,452 [11908] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-09-24 11:35:39,454 [11908] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-09-24 11:35:39,569 [11908] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-09-24 11:35:39,640 [8908] DEBUG Servicesys_permission - 获取动态列表
2013-09-24 11:35:39,640 [8908] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-09-24 11:35:44,115 [8908] DEBUG Servicesys_role - 修改角色菜单权限
2013-09-24 11:35:44,119 [8908] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-09-24 11:35:44,120 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-09-24 11:35:44,121 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-09-24 11:35:44,121 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-09-24 11:35:44,121 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-09-24 11:35:44,122 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-09-24 11:35:44,122 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-09-24 11:35:44,122 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-09-24 11:35:44,123 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-09-24 11:35:44,123 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-09-24 11:35:44,123 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-09-24 11:35:44,124 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-09-24 11:35:44,124 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-09-24 11:35:44,125 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-09-24 11:35:44,125 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-09-24 11:35:44,125 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-09-24 11:35:44,126 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-09-24 11:35:44,126 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-09-24 11:35:44,127 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-09-24 11:35:44,127 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-09-24 11:35:44,127 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-09-24 11:35:44,128 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-09-24 11:35:44,128 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-09-24 11:35:44,129 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-09-24 11:35:44,129 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-09-24 11:35:44,130 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-09-24 11:35:44,130 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-09-24 11:35:44,130 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-09-24 11:35:44,131 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-09-24 11:35:44,131 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-09-24 11:35:44,132 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-09-24 11:35:44,132 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-09-24 11:35:44,133 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-09-24 11:35:44,133 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-09-24 11:35:44,133 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-09-24 11:35:44,134 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-09-24 11:35:44,134 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-09-24 11:35:44,134 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-09-24 11:35:44,135 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-09-24 11:35:44,135 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-09-24 11:35:44,136 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-09-24 11:35:44,136 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-09-24 11:35:44,136 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-09-24 11:35:44,137 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-09-24 11:35:44,137 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-09-24 11:35:44,137 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-09-24 11:35:44,138 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-09-24 11:35:44,138 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-09-24 11:35:44,139 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-09-24 11:35:44,139 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-09-24 11:35:44,140 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-09-24 11:35:44,140 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-09-24 11:35:44,140 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-09-24 11:35:44,141 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-09-24 11:35:44,141 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2013-09-24 11:35:44,142 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2013-09-24 11:35:44,143 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-09-24 11:35:44,143 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-09-24 11:35:44,143 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2013-09-24 11:35:44,144 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2013-09-24 11:35:44,144 [8908] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2013-09-24 11:35:44,183 [8908] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-09-24 11:35:44,184 [8908] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-09-24 11:35:44,185 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2013-09-24 11:35:44,186 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2013-09-24 11:35:44,186 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2013-09-24 11:35:44,187 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2013-09-24 11:35:44,187 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2013-09-24 11:35:44,188 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2013-09-24 11:35:44,189 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2013-09-24 11:35:44,189 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2013-09-24 11:35:44,190 [8908] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2013-09-24 11:35:44,231 [8908] DEBUG Servicesys_role - 修改角色数据权限
2013-09-24 11:35:44,233 [8908] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-09-24 11:35:44,233 [8908] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2013-09-24 11:35:44,273 [8908] DEBUG Servicesys_role - 修改角色数据列权限
2013-09-24 11:35:44,277 [8908] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-09-24 11:35:44,286 [8908] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-09-24 11:35:48,695 [11908] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:35:48,704 [11908] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:35:48,706 [11908] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:35:48,892 [11908] ERROR ServiceREMP_Staff - 获取实体对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass70.<GetModel>b__6f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:36:01,153 [11908] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:36:42,864 [5108] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:36:42,866 [5108] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:36:42,867 [5108] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:36:42,975 [5108] ERROR ServiceREMP_Staff - 获取实体对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass70.<GetModel>b__6f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:36:51,827 [5108] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:37:05,067 [5108] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:37:13,784 [5108] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:37:13,784 [5108] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:37:13,880 [5108] ERROR ServiceREMP_Staff - 获取实体对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass70.<GetModel>b__6f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:37:15,575 [5108] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:37:37,371 [5108] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:37:41,162 [5108] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:37:41,163 [5108] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:37:41,308 [5108] ERROR ServiceREMP_Staff - 获取实体对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass70.<GetModel>b__6f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:37:42,774 [5108] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:37:59,877 [11204] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:38:01,363 [11204] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:38:01,363 [11204] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:38:01,465 [11204] ERROR ServiceREMP_Staff - 获取实体对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass70.<GetModel>b__6f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:38:02,712 [11204] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:38:23,780 [11204] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:38:38,228 [11204] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:38:54,573 [11204] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:38:56,644 [11204] ERROR ServiceREMP_Staff - 获取实体对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingle(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 129
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass70.<GetModel>b__6f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:39:02,810 [11204] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModel(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 51
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:01c35884-41d2-4cc9-b771-d4ce3713c538
2013-09-24 11:44:13,394 [13560] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:44:13,426 [13560] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:44:13,433 [13560] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:44:13,434 [13560] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:44:13,979 [14016] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:44:19,091 [13084] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:44:24,293 [14464] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:44:28,955 [14464] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:44:28,976 [14464] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:44:30,116 [14464] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:44:30,120 [14464] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:44:30,124 [14464] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:44:30,125 [14464] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:44:31,057 [6084] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:44:31,058 [6084] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:44:31,133 [6084] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:44:32,701 [8236] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:44:32,709 [8236] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:44:32,712 [8236] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:44:32,847 [8236] ERROR ServiceREMP_Staff - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass75.<GetDynamic>b__74() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:44:54,027 [8236] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:45:13,051 [5656] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:45:14,373 [5656] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:45:14,395 [5656] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:45:14,491 [5656] ERROR ServiceREMP_Staff - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass75.<GetDynamic>b__74() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:45:17,240 [5656] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:46:54,096 [14656] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:46:59,169 [14656] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:46:59,169 [14656] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:46:59,278 [14656] ERROR ServiceREMP_Staff - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass75.<GetDynamic>b__74() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:47:00,969 [14656] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 135
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 58
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:47:06,417 [2080] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:47:07,613 [2080] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:47:07,614 [2080] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:47:07,722 [2080] ERROR ServiceREMP_Staff - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass75.<GetDynamic>b__74() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c301dabd-9913-43d7-b704-94c24341e278
2013-09-24 11:47:17,504 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:47:17,544 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:47:17,551 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:47:17,552 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:47:18,167 [3056] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:47:22,131 [3684] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:48:38,314 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:48:38,342 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:48:38,348 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:48:38,349 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:48:38,892 [14788] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:48:43,927 [356] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:48:47,501 [3884] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:48:47,599 [3884] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:48:47,616 [3884] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:48:48,681 [3884] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:48:48,685 [3884] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:48:48,689 [3884] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:48:48,690 [3884] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:48:49,541 [14472] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:48:49,541 [14472] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:48:49,624 [14472] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:48:51,214 [9712] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:48:53,617 [9712] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:48:53,621 [9712] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  'undefined'
2013-09-24 11:48:53,750 [9712] ERROR ServiceREMP_Staff - 获取动态对象失败
System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Data.SelectBuilder`1.QuerySingleDynamic() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 155
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass75.<GetDynamic>b__74() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:d12dd970-a603-4a5e-97d1-d29bc4a3e36d
2013-09-24 11:49:05,791 [9712] ERROR /Mms/Staff/edit/undefined - System.Data.SqlClient.SqlException (0x80131904): 在将 varchar 值 'undefined' 转换成数据类型 int 时失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamic(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 59
   在 Zephyr.Areas.Mms.Controllers.StaffApiController.GetPageData(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 136
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 59
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:d12dd970-a603-4a5e-97d1-d29bc4a3e36d
2013-09-24 11:49:15,527 [11720] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:49:15,529 [11720] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:49:15,529 [11720] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:49:15,544 [11720] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:49:15,545 [11720] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:49:15,546 [11720] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:49:15,547 [11720] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:49:57,897 [10968] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:49:57,930 [10968] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:49:57,937 [10968] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:49:57,937 [10968] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:49:58,487 [13568] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:50:03,320 [12964] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:50:06,309 [14048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-09-24 11:50:08,160 [14048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:50:08,174 [14048] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:50:08,193 [14048] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:50:09,272 [14048] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:50:09,276 [14048] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:50:09,279 [14048] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:50:09,280 [14048] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:50:13,300 [14048] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:50:13,301 [14048] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:50:13,381 [14048] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:50:17,215 [14048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:50:17,223 [14048] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:50:17,225 [14048] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:50:17,230 [14048] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 11:50:17,261 [14048] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:50:17,263 [14048] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 11:50:17,266 [14048] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:50:17,266 [14048] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 11:50:17,269 [14048] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:50:17,269 [14048] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 11:50:17,272 [14048] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:50:17,272 [14048] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 11:50:17,976 [14048] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 11:50:17,977 [14048] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '2'
2013-09-24 11:50:17,982 [14048] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:50:17,984 [14048] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:50:18,003 [14048] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:50:18,004 [14048] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:50:18,005 [14048] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:50:18,006 [14048] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:50:18,010 [14048] DEBUG ServiceREMP_Department - 获取实体列表
2013-09-24 11:50:18,015 [14048] DEBUG Mms - select REMP_Department.* from REMP_Department
2013-09-24 11:52:54,128 [8684] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:52:54,159 [8684] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:52:54,165 [8684] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:52:54,166 [8684] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:52:54,708 [14716] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:52:59,724 [2516] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:53:02,679 [14716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:53:02,781 [14716] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:53:02,799 [14716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:53:03,967 [14716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:53:03,971 [14716] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:53:03,975 [14716] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:53:03,976 [14716] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:53:04,800 [14472] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:53:04,801 [14472] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:53:04,883 [14472] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:53:05,946 [14716] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:53:05,954 [14716] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:53:05,956 [14716] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:53:05,990 [14716] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 11:53:06,019 [14716] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:53:06,021 [14716] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 11:53:06,025 [14716] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:53:06,025 [14716] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 11:53:06,029 [14716] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:53:06,030 [14716] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 11:53:06,033 [14716] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:53:06,034 [14716] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 11:53:06,730 [14716] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 11:53:06,731 [14716] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '2'
2013-09-24 11:53:06,733 [14716] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:53:06,735 [14716] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:53:06,753 [14716] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:53:06,753 [14716] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:53:06,755 [14716] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:53:06,755 [14716] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:53:06,759 [14716] DEBUG ServiceREMP_Department - 获取实体列表
2013-09-24 11:53:06,765 [14716] DEBUG Mms - select REMP_Department.* from REMP_Department
2013-09-24 11:54:41,398 [12588] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:54:41,400 [12588] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:54:41,400 [12588] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:54:42,748 [12588] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:54:42,749 [12588] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:54:42,750 [12588] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:54:42,751 [12588] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:54:43,596 [1908] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:54:43,596 [1908] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:54:43,598 [1908] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:55:07,568 [13568] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:55:07,570 [13568] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:55:07,570 [13568] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:55:09,025 [13568] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:55:09,026 [13568] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:55:09,026 [13568] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:55:09,027 [13568] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:55:10,057 [14716] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:55:10,057 [14716] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:55:10,059 [14716] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:55:12,730 [14716] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:55:12,731 [14716] DEBUG Mms - select top 20 * from REMP_Staff where  UserType =  '107' order by EMPSID
2013-09-24 11:55:12,737 [14716] DEBUG Mms - select count(*) from ( select * from REMP_Staff where  UserType =  '107' ) tb_temp
2013-09-24 11:55:13,855 [11720] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:55:13,856 [11720] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:55:13,858 [11720] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:55:15,501 [14472] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:55:15,503 [14472] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:55:15,504 [14472] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:55:15,505 [14472] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 11:55:15,505 [14472] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:55:15,506 [14472] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 11:55:15,506 [14472] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:55:15,506 [14472] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 11:55:15,507 [14472] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:55:15,507 [14472] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 11:55:15,507 [14472] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:55:15,507 [14472] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 11:55:15,508 [14472] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 11:55:15,508 [14472] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '2'
2013-09-24 11:55:15,508 [14472] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:55:15,509 [14472] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:55:15,510 [14472] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:55:15,511 [14472] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:55:15,512 [14472] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:55:15,512 [14472] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:55:15,513 [14472] DEBUG ServiceREMP_Department - 获取实体列表
2013-09-24 11:55:15,513 [14472] DEBUG Mms - select REMP_Department.* from REMP_Department
2013-09-24 11:56:33,142 [1748] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:56:33,173 [1748] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:56:33,179 [1748] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:56:33,180 [1748] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:56:33,556 [6632] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:56:33,576 [6632] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:56:33,594 [6632] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:56:33,605 [6632] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 11:56:33,629 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:56:33,631 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 11:56:33,633 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:56:33,634 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 11:56:33,635 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:56:33,635 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 11:56:33,637 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:56:33,637 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 11:56:34,345 [6632] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 11:56:34,346 [6632] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '2'
2013-09-24 11:56:34,349 [6632] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:56:34,350 [6632] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:56:34,372 [6632] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:56:34,372 [6632] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:56:34,375 [6632] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:56:34,376 [6632] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:56:34,380 [6632] DEBUG ServiceREMP_Department - 获取实体列表
2013-09-24 11:56:34,385 [6632] DEBUG Mms - select REMP_Department.* from REMP_Department
2013-09-24 11:58:05,222 [6632] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:58:05,225 [6632] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:58:05,225 [6632] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:58:05,227 [6632] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 11:58:05,227 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:58:05,227 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 11:58:05,228 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:58:05,228 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 11:58:05,228 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:58:05,228 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 11:58:05,229 [6632] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:58:05,229 [6632] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 11:58:05,229 [6632] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 11:58:05,230 [6632] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '2'
2013-09-24 11:58:05,230 [6632] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:58:05,230 [6632] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:58:05,232 [6632] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:58:05,233 [6632] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:58:05,234 [6632] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:58:05,235 [6632] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:58:05,236 [6632] DEBUG ServiceREMP_Department - 获取实体列表
2013-09-24 11:58:05,236 [6632] DEBUG Mms - select REMP_Department.* from REMP_Department
2013-09-24 11:59:30,382 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:59:30,414 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:59:30,422 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:59:30,422 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 11:59:30,979 [12696] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 11:59:35,762 [12696] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 11:59:40,665 [5988] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 11:59:40,682 [5988] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:59:40,700 [5988] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:59:41,752 [5988] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:59:41,756 [5988] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 11:59:41,760 [5988] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 11:59:41,761 [5988] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 11:59:42,793 [6600] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 11:59:42,793 [6600] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 11:59:42,870 [6600] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 11:59:43,962 [7056] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 11:59:43,971 [7056] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 11:59:43,973 [7056] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:59:43,977 [7056] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 11:59:44,009 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:59:44,011 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 11:59:44,012 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:59:44,013 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 11:59:44,015 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:59:44,015 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 11:59:44,017 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 11:59:44,017 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 11:59:44,700 [7056] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 11:59:44,701 [7056] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '2'
2013-09-24 11:59:44,703 [7056] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:59:44,705 [7056] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:59:44,724 [7056] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 11:59:44,724 [7056] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 11:59:44,726 [7056] DEBUG Servicesys_code - 获取动态列表
2013-09-24 11:59:44,726 [7056] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 11:59:44,731 [7056] DEBUG ServiceREMP_Department - 获取实体列表
2013-09-24 11:59:44,736 [7056] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 11:59:44,842 [7056] ERROR ServiceREMP_Department - 获取实体列表失败
Zephyr.Data.FluentDataException: Could not map: text
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryMany(Action`2 customMapper) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 99
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass60.<GetModelList>b__5f() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-09-24 11:59:53,159 [7056] ERROR /Mms/Staff/edit/2 - Zephyr.Data.FluentDataException: Could not map: text
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetModelList(ParamQuery param) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 21
   在 Zephyr.Areas.Mms.Controllers.StaffController.Edit(String id) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Mms\Controllers\StaffController.cs:行号 59
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-09-24 12:00:21,095 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:00:21,128 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:00:21,135 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:00:21,135 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:00:21,683 [10160] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 12:00:26,492 [5988] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 12:00:30,600 [5988] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 12:00:30,616 [5988] DEBUG Servicesys_code - 获取动态列表
2013-09-24 12:00:30,635 [5988] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 12:00:31,706 [5988] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 12:00:31,710 [5988] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 12:00:31,714 [5988] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 12:00:31,715 [5988] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 12:00:32,783 [5324] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 12:00:32,784 [5324] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 12:00:32,864 [5324] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 12:00:43,291 [12696] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 12:00:43,299 [12696] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:00:43,302 [12696] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:00:43,306 [12696] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:00:43,341 [12696] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:00:43,343 [12696] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:00:43,344 [12696] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:00:43,345 [12696] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '3' order by EMPSID desc
2013-09-24 12:00:43,348 [12696] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:00:43,349 [12696] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '3' order by EMPSID
2013-09-24 12:00:43,352 [12696] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:00:43,352 [12696] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:00:44,033 [12696] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:00:44,033 [12696] DEBUG Mms - select REMP_Change.* from REMP_Change where  CHANID =  '3'
2013-09-24 12:00:44,035 [12696] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:00:44,037 [12696] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:00:44,056 [12696] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:00:44,056 [12696] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:00:44,058 [12696] DEBUG Servicesys_code - 获取动态列表
2013-09-24 12:00:44,058 [12696] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 12:00:44,059 [12696] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 12:00:44,060 [12696] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 12:00:53,248 [5324] DEBUG ServiceREMP_Change - 获取新主键
2013-09-24 12:00:53,251 [5324] DEBUG Mms - select isnull(max(CHANID),0) from REMP_Change  where 1 = 1  and  CHANID =  '3'
2013-09-24 12:02:50,013 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:02:50,045 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:02:50,052 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:02:50,053 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 12:02:50,610 [14424] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 12:02:55,503 [5324] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 12:03:01,585 [14424] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 12:03:01,602 [14424] DEBUG Servicesys_code - 获取动态列表
2013-09-24 12:03:01,622 [14424] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 12:03:02,674 [14424] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 12:03:02,678 [14424] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 12:03:02,682 [14424] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 12:03:02,683 [14424] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 12:03:03,747 [6632] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 12:03:03,747 [6632] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 12:03:03,827 [6632] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 12:03:30,379 [5324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 12:03:30,387 [5324] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:03:30,389 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:03:30,393 [5324] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:03:30,427 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:03:30,430 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:03:30,433 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:03:30,433 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '3' order by EMPSID desc
2013-09-24 12:03:30,435 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:03:30,436 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '3' order by EMPSID
2013-09-24 12:03:30,437 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:03:30,437 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:03:31,122 [5324] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:03:31,123 [5324] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '3'
2013-09-24 12:03:31,129 [5324] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:03:31,131 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:03:31,149 [5324] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:03:31,150 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:03:31,152 [5324] DEBUG Servicesys_code - 获取动态列表
2013-09-24 12:03:31,152 [5324] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 12:03:31,153 [5324] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 12:03:31,154 [5324] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 12:04:06,792 [5324] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:04:06,793 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '4'
2013-09-24 12:04:06,795 [5324] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:04:06,795 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:06,795 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:04:06,795 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:06,795 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '4' order by EMPSID desc
2013-09-24 12:04:06,797 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:06,798 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '4' order by EMPSID
2013-09-24 12:04:06,799 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:06,800 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:04:06,800 [5324] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:04:06,800 [5324] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '4'
2013-09-24 12:04:06,801 [5324] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:06,801 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '4'
2013-09-24 12:04:06,803 [5324] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:06,803 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '4'
2013-09-24 12:04:07,801 [7056] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:04:07,802 [7056] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:04:07,803 [7056] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:04:07,803 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:07,804 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:04:07,804 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:07,804 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '3' order by EMPSID desc
2013-09-24 12:04:07,805 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:07,805 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '3' order by EMPSID
2013-09-24 12:04:07,805 [7056] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:07,805 [7056] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:04:07,806 [7056] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:04:07,806 [7056] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '3'
2013-09-24 12:04:07,806 [7056] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:07,807 [7056] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:04:07,808 [7056] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:07,809 [7056] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 12:04:11,098 [6600] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:04:11,098 [6600] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 12:04:11,099 [6600] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:04:11,100 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:11,100 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:04:11,100 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:11,100 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 12:04:11,100 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:11,101 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 12:04:11,101 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:11,101 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:04:11,101 [6600] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:04:11,102 [6600] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 12:04:11,102 [6600] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:11,102 [6600] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 12:04:11,104 [6600] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:11,104 [6600] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 12:04:12,264 [6600] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:04:12,264 [6600] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 12:04:12,266 [6600] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:04:12,266 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:12,266 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:04:12,267 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:12,267 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '1' order by EMPSID desc
2013-09-24 12:04:12,270 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:12,270 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '1' order by EMPSID
2013-09-24 12:04:12,272 [6600] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:12,272 [6600] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:04:12,272 [6600] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:04:12,273 [6600] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '1'
2013-09-24 12:04:12,273 [6600] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:12,274 [6600] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 12:04:12,276 [6600] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:12,276 [6600] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 12:04:49,649 [5324] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 12:04:49,652 [5324] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 12:04:49,652 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 12:04:49,654 [5324] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 12:04:49,654 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:49,654 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 12:04:49,655 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:49,655 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 12:04:49,655 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:49,655 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 12:04:49,656 [5324] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 12:04:49,656 [5324] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 12:04:49,656 [5324] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 12:04:49,657 [5324] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 12:04:49,657 [5324] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:49,657 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 12:04:49,659 [5324] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 12:04:49,659 [5324] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 12:04:49,661 [5324] DEBUG Servicesys_code - 获取动态列表
2013-09-24 12:04:49,662 [5324] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 12:04:49,662 [5324] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 12:04:49,662 [5324] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 13:58:54,535 [7900] DEBUG ServiceREMP_Change - 获取新主键
2013-09-24 13:58:54,543 [7900] DEBUG Mms - select isnull(max(CHANID),0) from REMP_Change  where 1 = 1  and  CHANID =  '2'
2013-09-24 13:59:47,549 [10424] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 13:59:47,571 [10424] DEBUG Mms - select 
        REMP_Staff
    .* from 
        REMP_Staff
     where  EMPSID =  '2'
2013-09-24 13:59:47,588 [10424] DEBUG Mms - update 
        REMP_Staff
     set [Birthday] = '2013-09-01', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 13:59:47' where  EMPSID =  '2'
2013-09-24 14:00:47,493 [13724] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:00:55,264 [13724] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:01:06,172 [5916] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:01:10,772 [13724] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Change')
ORDER BY sys.columns.column_id
2013-09-24 14:01:45,244 [14384] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:01:45,306 [14384] DEBUG Mms - sp_pkeys 'REMP_Staff'
2013-09-24 14:02:19,917 [13508] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:02:19,919 [13508] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:02:19,919 [13508] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:02:19,921 [13508] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:02:19,921 [13508] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:19,921 [13508] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:02:19,921 [13508] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:19,922 [13508] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:02:19,922 [13508] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:19,922 [13508] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:02:19,923 [13508] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:19,923 [13508] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:02:19,923 [13508] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:02:19,923 [13508] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:02:19,924 [13508] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:02:19,924 [13508] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:02:19,926 [13508] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:02:19,926 [13508] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:02:19,928 [13508] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:02:19,928 [13508] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:02:19,929 [13508] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:02:19,929 [13508] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:02:36,200 [10424] DEBUG ServiceREMP_Change - 获取新主键
2013-09-24 14:02:36,200 [10424] DEBUG Mms - select isnull(max(CHANID),0) from REMP_Change  where 1 = 1  and  CHANID =  '2'
2013-09-24 14:02:38,387 [5916] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:02:38,390 [5916] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:02:38,390 [5916] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:02:38,391 [5916] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:02:38,391 [5916] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:38,391 [5916] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:02:38,392 [5916] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:38,392 [5916] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:02:38,392 [5916] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:38,393 [5916] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:02:38,393 [5916] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:02:38,393 [5916] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:02:38,393 [5916] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:02:38,394 [5916] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:02:38,394 [5916] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:02:38,394 [5916] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:02:38,395 [5916] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:02:38,396 [5916] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:02:38,397 [5916] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:02:38,397 [5916] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:02:38,398 [5916] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:02:38,398 [5916] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:03:21,630 [5916] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:03:21,698 [5916] DEBUG Mms - sp_pkeys 'REMP_Staff'
2013-09-24 14:04:17,243 [8272] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:04:17,245 [8272] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:04:17,246 [8272] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:04:17,247 [8272] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:04:17,247 [8272] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:17,248 [8272] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:04:17,248 [8272] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:17,248 [8272] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:04:17,249 [8272] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:17,249 [8272] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:04:17,249 [8272] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:17,249 [8272] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:04:17,250 [8272] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:04:17,250 [8272] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:04:17,250 [8272] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:04:17,251 [8272] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:04:17,252 [8272] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:04:17,252 [8272] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:04:17,254 [8272] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:04:17,254 [8272] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:04:17,255 [8272] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:04:17,255 [8272] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:04:34,932 [13528] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:04:34,935 [13528] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:04:34,935 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:04:34,937 [13528] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:04:34,937 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:34,937 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:04:34,937 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:34,937 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:04:34,938 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:34,938 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:04:34,938 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:04:34,939 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:04:34,939 [13528] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:04:34,939 [13528] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:04:34,940 [13528] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:04:34,940 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:04:34,942 [13528] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:04:34,942 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:04:34,944 [13528] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:04:34,944 [13528] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:04:34,944 [13528] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:04:34,945 [13528] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:05:21,771 [7036] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:05:21,773 [7036] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:05:21,773 [7036] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:05:21,775 [7036] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:05:21,775 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:21,775 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:05:21,776 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:21,776 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:05:21,776 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:21,776 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:05:21,777 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:21,777 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:05:21,777 [7036] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:05:21,778 [7036] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:05:21,778 [7036] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:05:21,778 [7036] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:05:21,780 [7036] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:05:21,780 [7036] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:05:21,782 [7036] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:05:21,782 [7036] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:05:21,783 [7036] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:05:21,783 [7036] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:05:48,448 [7100] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:05:48,450 [7100] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:05:48,451 [7100] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:05:48,452 [7100] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:05:48,452 [7100] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:48,453 [7100] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:05:48,453 [7100] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:48,453 [7100] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:05:48,454 [7100] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:48,454 [7100] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:05:48,454 [7100] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:05:48,454 [7100] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:05:48,455 [7100] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:05:48,455 [7100] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:05:48,456 [7100] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:05:48,456 [7100] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:05:48,458 [7100] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:05:48,458 [7100] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:05:48,460 [7100] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:05:48,460 [7100] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:05:48,460 [7100] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:05:48,461 [7100] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:06:07,785 [8104] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 14:06:07,786 [8104] DEBUG Mms - select 
        REMP_Staff
    .* from 
        REMP_Staff
     where  EMPSID =  '2'
2013-09-24 14:06:07,788 [8104] DEBUG Mms - update 
        REMP_Staff
     set [Nationality] = '12', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:06:07' where  EMPSID =  '2'
2013-09-24 14:07:05,343 [8104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:07:05,345 [8104] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:07:05,351 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:05,352 [8104] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:07:05,352 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:05,353 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:07:05,353 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:05,353 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:07:05,354 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:05,354 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:07:05,354 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:05,354 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:07:05,355 [8104] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:07:05,355 [8104] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:07:05,355 [8104] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:07:05,355 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:05,357 [8104] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:07:05,357 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:05,359 [8104] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:07:05,359 [8104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:07:05,360 [8104] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:07:05,360 [8104] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:07:16,029 [5916] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 14:07:16,031 [5916] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:16,037 [5916] DEBUG Mms - update REMP_Staff set [Duty] = '22', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:07:16' where  EMPSID =  '2'
2013-09-24 14:07:35,279 [13028] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:07:35,281 [13028] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:07:35,282 [13028] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:35,283 [13028] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:07:35,283 [13028] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:35,284 [13028] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:07:35,284 [13028] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:35,284 [13028] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:07:35,285 [13028] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:35,285 [13028] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:07:35,285 [13028] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:07:35,285 [13028] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:07:35,286 [13028] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:07:35,286 [13028] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:07:35,287 [13028] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:07:35,287 [13028] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:35,289 [13028] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:07:35,289 [13028] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:07:35,291 [13028] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:07:35,291 [13028] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:07:35,292 [13028] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:07:35,292 [13028] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:07:52,046 [15044] DEBUG ServiceREMP_Staff - 更新记录
2013-09-24 14:07:52,048 [15044] DEBUG Mms - update REMP_Staff set [ApproveState] = 'passed', [ApproveRemark] = '', [ApprovePerson] = '刘会胜', [ApproveDate] = '2013-09-24 14:07:52', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:07:52' where  EMPSID =  '2'
2013-09-24 14:11:16,347 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 14:11:16,380 [12188] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 14:11:16,387 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 14:11:16,387 [12188] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-09-24 14:11:16,918 [7036] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 14:11:21,968 [8104] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 14:11:25,582 [7100] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 14:11:25,602 [7100] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:11:25,621 [7100] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:11:26,741 [7100] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 14:11:26,745 [7100] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 14:11:26,748 [7100] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 14:11:26,749 [7100] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 14:11:28,841 [10752] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:11:28,842 [10752] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 14:11:28,922 [10752] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:11:33,566 [10752] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:11:33,569 [10752] DEBUG Mms - select top 20 * from REMP_Staff where  datediff(day,'2013-09-24',Birthday) >=0 and datediff(day,'2013-09-24',Birthday)<=0 order by EMPSID
2013-09-24 14:11:33,575 [10752] DEBUG Mms - select count(*) from ( select * from REMP_Staff where  datediff(day,'2013-09-24',Birthday) >=0 and datediff(day,'2013-09-24',Birthday)<=0 ) tb_temp
2013-09-24 14:11:34,876 [7100] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:11:34,876 [7100] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 14:11:34,879 [7100] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:13:27,527 [7844] DEBUG ServiceREMP_Staff - 更新记录
2013-09-24 14:13:27,544 [7844] DEBUG Mms - update REMP_Staff set [ApproveState] = 'passed', [ApproveRemark] = 'aa', [ApprovePerson] = '刘会胜', [ApproveDate] = '2013-09-24 14:13:27', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:13:27' where  EMPSID =  '2'
2013-09-24 14:13:37,448 [8104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-09-24 14:13:37,462 [8104] DEBUG Servicemms_warehouse - 获取动态列表
2013-09-24 14:13:37,468 [8104] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-09-24 14:13:37,470 [8104] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:13:37,471 [8104] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2013-09-24 14:13:40,453 [10752] DEBUG Servicemms_receive - 获取动态列表
2013-09-24 14:13:40,453 [10752] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-09-24 14:13:40,517 [10752] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-09-24 14:13:53,673 [13608] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-09-24 14:13:53,675 [13608] DEBUG Servicemms_warehouse - 获取动态列表
2013-09-24 14:13:53,675 [13608] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-09-24 14:13:53,676 [13608] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:13:53,676 [13608] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2013-09-24 14:13:54,496 [8804] DEBUG Servicemms_receive - 获取动态列表
2013-09-24 14:13:54,496 [8804] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-09-24 14:13:54,498 [8804] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-09-24 14:14:18,764 [8804] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-09-24 14:14:19,127 [7844] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-09-24 14:14:19,673 [5916] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-09-24 14:14:19,675 [5916] DEBUG Servicemms_warehouse - 获取动态列表
2013-09-24 14:14:19,675 [5916] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-09-24 14:14:19,676 [5916] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:14:19,676 [5916] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2013-09-24 14:14:20,467 [5916] DEBUG Servicemms_receive - 获取动态列表
2013-09-24 14:14:20,468 [5916] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-09-24 14:14:20,470 [5916] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-09-24 14:14:31,354 [8804] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/staff/Index','/Mms/staff')
2013-09-24 14:14:31,357 [8804] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:14:31,357 [8804] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:14:31,380 [8804] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 14:14:31,381 [8804] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '9960'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-09-24 14:14:31,382 [8804] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/staff'
2013-09-24 14:14:31,383 [8804] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '9960' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-09-24 14:14:31,868 [8104] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:14:31,868 [8104] DEBUG Mms - select top 20 * from REMP_Staff order by EMPSID
2013-09-24 14:14:31,871 [8104] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:15:02,153 [10752] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:15:02,162 [10752] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:15:02,165 [10752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:15:02,169 [10752] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:15:02,198 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:15:02,200 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:15:02,202 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:15:02,202 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:15:02,204 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:15:02,204 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:15:02,206 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:15:02,206 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:15:02,904 [10752] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:15:02,905 [10752] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:15:02,907 [10752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:15:02,909 [10752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:15:02,927 [10752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:15:02,927 [10752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:15:02,929 [10752] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:15:02,929 [10752] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:15:02,930 [10752] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:15:02,931 [10752] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:15:12,354 [8104] DEBUG ServiceREMP_Staff - 更新记录
2013-09-24 14:15:12,355 [8104] DEBUG Mms - update REMP_Staff set [ApproveState] = 'reject', [ApproveRemark] = 'aa', [ApprovePerson] = '刘会胜', [ApproveDate] = '2013-09-24 14:15:12', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:15:12' where  EMPSID =  '2'
2013-09-24 14:15:43,464 [13528] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 14:15:43,482 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:15:43,489 [13528] DEBUG Mms - update REMP_Staff set [HomeAddress] = '木棒棒棒棒棒棒棒', [HomeZipCode] = '1232', [InDutyDate] = '2013-09-24', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:15:43' where  EMPSID =  '2'
2013-09-24 14:15:56,803 [10752] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 14:15:56,804 [10752] DEBUG Mms - select 
        REMP_Staff
    .* from 
        REMP_Staff
     where  EMPSID =  '2'
2013-09-24 14:15:56,808 [10752] DEBUG Mms - update 
        REMP_Staff
     set [UserType] = '108', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:15:56' where  EMPSID =  '2'
2013-09-24 14:16:15,955 [13608] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 14:16:15,956 [13608] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:16:15,958 [13608] DEBUG Mms - update REMP_Staff set [Folk] = 'aa', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:16:15' where  EMPSID =  '2'
2013-09-24 14:16:21,836 [6752] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:16:21,839 [6752] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:16:21,839 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 14:16:21,841 [6752] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:16:21,841 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:21,841 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:16:21,841 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:21,842 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '3' order by EMPSID desc
2013-09-24 14:16:21,842 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:21,842 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '3' order by EMPSID
2013-09-24 14:16:21,843 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:21,843 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:16:21,843 [6752] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:16:21,843 [6752] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '3'
2013-09-24 14:16:21,844 [6752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:21,844 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 14:16:21,846 [6752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:21,846 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 14:16:21,848 [6752] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:16:21,849 [6752] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:16:21,850 [6752] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:16:21,850 [6752] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:16:23,924 [13608] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:16:23,924 [13608] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '4'
2013-09-24 14:16:23,926 [13608] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:16:23,926 [13608] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:23,926 [13608] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:16:23,927 [13608] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:23,927 [13608] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '4' order by EMPSID desc
2013-09-24 14:16:23,927 [13608] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:23,928 [13608] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '4' order by EMPSID
2013-09-24 14:16:23,928 [13608] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:23,928 [13608] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:16:23,929 [13608] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:16:23,929 [13608] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '4'
2013-09-24 14:16:23,930 [13608] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:23,930 [13608] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '4'
2013-09-24 14:16:23,932 [13608] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:23,932 [13608] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '4'
2013-09-24 14:16:25,054 [8104] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:16:25,054 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 14:16:25,056 [8104] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:16:25,056 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,056 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:16:25,057 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,057 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '3' order by EMPSID desc
2013-09-24 14:16:25,058 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,058 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '3' order by EMPSID
2013-09-24 14:16:25,058 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,058 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:16:25,059 [8104] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:16:25,059 [8104] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '3'
2013-09-24 14:16:25,059 [8104] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:25,059 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 14:16:25,061 [8104] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:25,062 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '3'
2013-09-24 14:16:25,698 [7036] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:16:25,698 [7036] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:16:25,700 [7036] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:16:25,700 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,700 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:16:25,701 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,701 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:16:25,701 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,702 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:16:25,702 [7036] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:25,702 [7036] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:16:25,703 [7036] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:16:25,703 [7036] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:16:25,703 [7036] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:25,704 [7036] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:16:25,705 [7036] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:25,706 [7036] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:16:26,901 [10752] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:16:26,902 [10752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:16:26,904 [10752] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:16:26,904 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:26,904 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:16:26,904 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:26,904 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '1' order by EMPSID desc
2013-09-24 14:16:26,905 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:26,905 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '1' order by EMPSID
2013-09-24 14:16:26,905 [10752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:16:26,906 [10752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:16:26,906 [10752] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:16:26,906 [10752] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '1'
2013-09-24 14:16:26,907 [10752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:26,907 [10752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:16:26,909 [10752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:16:26,909 [10752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:16:30,824 [10752] DEBUG ServiceREMP_Change - 获取新主键
2013-09-24 14:16:30,826 [10752] DEBUG Mms - select isnull(max(CHANID),0) from REMP_Change  where 1 = 1  and  CHANID =  '1'
2013-09-24 14:18:03,012 [7036] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:18:03,012 [7036] DEBUG Mms - select * from REMP_Staff order by EMPSID
2013-09-24 14:18:13,539 [7036] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:18:13,540 [7036] DEBUG Mms - select * from REMP_Staff order by EMPSID
2013-09-24 14:18:56,249 [6752] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:18:56,249 [6752] DEBUG Mms - select top 20 * from REMP_Staff order by DEPTID asc
2013-09-24 14:18:56,256 [6752] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:18:56,777 [13528] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:18:56,777 [13528] DEBUG Mms - select top 20 * from REMP_Staff order by DEPTID desc
2013-09-24 14:18:56,785 [13528] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:19:06,073 [10752] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:19:06,073 [10752] DEBUG Mms - select top 20 * from REMP_Staff order by DEPTID asc
2013-09-24 14:19:06,076 [10752] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:19:09,571 [6752] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/Staff/edit')
2013-09-24 14:19:09,574 [6752] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:19:09,575 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:19:09,576 [6752] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:19:09,577 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:19:09,577 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:19:09,577 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:19:09,578 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '1' order by EMPSID desc
2013-09-24 14:19:09,578 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:19:09,578 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '1' order by EMPSID
2013-09-24 14:19:09,579 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:19:09,579 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:19:09,579 [6752] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:19:09,579 [6752] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '1'
2013-09-24 14:19:09,580 [6752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:19:09,580 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:19:09,582 [6752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:19:09,583 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:19:09,586 [6752] DEBUG Servicesys_code - 获取动态列表
2013-09-24 14:19:09,586 [6752] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PersonType'
2013-09-24 14:19:09,587 [6752] DEBUG ServiceREMP_Department - 获取动态列表
2013-09-24 14:19:09,587 [6752] DEBUG Mms - select deptname as text,DEPTID as value from REMP_Department
2013-09-24 14:19:34,545 [6752] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-09-24 14:19:42,558 [7100] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2013-09-24 14:19:42,571 [7844] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-09-24 14:19:48,485 [7844] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:20:24,814 [7844] DEBUG ServiceREMP_Staff - 编辑记录
2013-09-24 14:20:24,816 [7844] DEBUG Mms - select 
        REMP_Staff
    .* from 
        REMP_Staff
     where  EMPSID =  '1'
2013-09-24 14:20:24,818 [7844] DEBUG Mms - update 
        REMP_Staff
     set [Birthday] = '2013-09-04', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:20:24' where  EMPSID =  '1'
2013-09-24 14:21:38,865 [6752] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:21:38,865 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:21:38,867 [6752] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:21:38,867 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:38,867 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:21:38,867 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:38,868 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:21:38,868 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:38,868 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:21:38,869 [6752] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:38,869 [6752] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:21:38,869 [6752] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:21:38,869 [6752] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:21:38,870 [6752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:21:38,870 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:21:38,872 [6752] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:21:38,872 [6752] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:21:40,077 [13528] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:21:40,078 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:21:40,079 [13528] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:21:40,080 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:40,080 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:21:40,080 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:40,080 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '1' order by EMPSID desc
2013-09-24 14:21:40,081 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:40,081 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '1' order by EMPSID
2013-09-24 14:21:40,081 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:21:40,082 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:21:40,082 [13528] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:21:40,082 [13528] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '1'
2013-09-24 14:21:40,083 [13528] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:21:40,083 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:21:40,085 [13528] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:21:40,085 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:21:58,752 [6752] DEBUG ServiceREMP_Staff - 更新记录
2013-09-24 14:21:58,753 [6752] DEBUG Mms - update REMP_Staff set [ApproveState] = 'passed', [ApproveRemark] = '', [ApprovePerson] = '刘会胜', [ApproveDate] = '2013-09-24 14:21:58', [ModifiedBy] = '刘会胜', [ModifiedOn] = '2013-09-24 14:21:58' where  EMPSID =  '1'
2013-09-24 14:22:08,426 [8104] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:22:08,427 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:22:08,429 [8104] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:22:08,429 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:08,430 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:22:08,430 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:08,430 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:22:08,431 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:08,431 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:22:08,431 [8104] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:08,432 [8104] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:22:08,432 [8104] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:22:08,432 [8104] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:22:08,433 [8104] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:22:08,433 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:22:08,436 [8104] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:22:08,436 [8104] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:22:10,387 [2140] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:22:10,387 [2140] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:22:10,389 [2140] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:22:10,389 [2140] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:10,389 [2140] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:22:10,390 [2140] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:10,390 [2140] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '1' order by EMPSID desc
2013-09-24 14:22:10,390 [2140] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:10,391 [2140] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '1' order by EMPSID
2013-09-24 14:22:10,391 [2140] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:22:10,391 [2140] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:22:10,392 [2140] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:22:10,392 [2140] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '1'
2013-09-24 14:22:10,393 [2140] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:22:10,393 [2140] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:22:10,395 [2140] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:22:10,395 [2140] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '1'
2013-09-24 14:22:52,076 [2140] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-09-24 14:22:57,005 [2140] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2013-09-24 14:22:57,020 [6752] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-09-24 14:22:58,659 [2140] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:23:04,507 [10752] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:23:05,036 [2140] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:23:49,535 [6752] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:23:50,472 [6752] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('REMP_Staff')
ORDER BY sys.columns.column_id
2013-09-24 14:24:16,848 [7844] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:24:16,848 [7844] DEBUG Mms - select top 20 * from REMP_Staff where  UserName =  '张' order by DEPTID asc
2013-09-24 14:24:16,855 [7844] DEBUG Mms - select count(*) from ( select * from REMP_Staff where  UserName =  '张' ) tb_temp
2013-09-24 14:24:18,103 [6752] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:24:18,103 [6752] DEBUG Mms - select top 20 * from REMP_Staff order by DEPTID asc
2013-09-24 14:24:18,106 [6752] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
2013-09-24 14:24:23,390 [15316] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:24:23,390 [15316] DEBUG Mms - select top 20 * from REMP_Staff where  UserName =  '张三' order by DEPTID asc
2013-09-24 14:24:23,397 [15316] DEBUG Mms - select count(*) from ( select * from REMP_Staff where  UserName =  '张三' ) tb_temp
2013-09-24 14:25:56,786 [13528] DEBUG ServiceREMP_Staff - 获取动态对象
2013-09-24 14:25:56,786 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:25:56,788 [13528] DEBUG ServiceREMP_Staff - 获取上一条下一条数据
2013-09-24 14:25:56,788 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:25:56,788 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID
2013-09-24 14:25:56,789 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:25:56,789 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID < '2' order by EMPSID desc
2013-09-24 14:25:56,789 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:25:56,789 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff where  EMPSID >  '2' order by EMPSID
2013-09-24 14:25:56,790 [13528] DEBUG ServiceREMP_Staff - 获取字段
2013-09-24 14:25:56,790 [13528] DEBUG Mms - select top 1 EMPSID from REMP_Staff order by EMPSID desc
2013-09-24 14:25:56,790 [13528] DEBUG ServiceREMP_Change - 获取动态列表
2013-09-24 14:25:56,791 [13528] DEBUG Mms - select REMP_Change.* from REMP_Change where  EMPSID =  '2'
2013-09-24 14:25:56,791 [13528] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:25:56,791 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:25:56,793 [13528] DEBUG ServiceREMP_Staff - 获取实体对象
2013-09-24 14:25:56,793 [13528] DEBUG Mms - select REMP_Staff.* from REMP_Staff where  EMPSID =  '2'
2013-09-24 14:35:33,731 [2140] DEBUG ServiceREMP_Staff - 获取动态列表
2013-09-24 14:35:33,737 [2140] DEBUG Mms - select top 20 * from REMP_Staff order by DEPTID asc
2013-09-24 14:35:33,740 [2140] DEBUG Mms - select count(*) from ( select * from REMP_Staff ) tb_temp
