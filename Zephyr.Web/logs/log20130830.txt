2013-08-30 09:57:12,241 [12000] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 09:57:12,274 [12000] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 09:57:12,280 [12000] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 09:57:12,281 [12000] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 09:58:51,819 [2960] DEBUG Servicesys_user - 获取实体对象
2013-08-30 09:58:51,840 [2960] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'lhs'and Password =  'lhs'and IsEnable =  'True'
2013-08-30 09:58:51,949 [2960] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'lhs' 
2013-08-30 09:58:52,024 [2960] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('lhs','刘会胜','LHS-PC','ILData[0]/localhost','福建省厦门市','2013-08-30 9:58:51')
2013-08-30 09:58:52,028 [2960] DEBUG Servicemms_project - 获取实体对象
2013-08-30 09:58:52,028 [2960] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2013-08-30 09:58:52,218 [16324] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 09:58:55,391 [18204] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 09:58:58,393 [5252] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/testabc/Index','/Mms/testabc')
2013-08-30 09:58:58,406 [5252] DEBUG Servicesys_code - 获取动态列表
2013-08-30 09:58:58,407 [5252] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 09:59:00,580 [17108] DEBUG Servicemms_test - 获取动态列表
2013-08-30 09:59:00,581 [17108] DEBUG Mms - select top 20 * from mms_test order by ID
2013-08-30 09:59:00,656 [17108] DEBUG Mms - select count(*) from ( select * from mms_test ) tb_temp
2013-08-30 09:59:23,236 [2960] DEBUG Servicemms_test - 编辑记录
2013-08-30 09:59:23,255 [2960] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:23,259 [2960] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100005'
2013-08-30 09:59:23,277 [2960] DEBUG Mms - update 
        mms_test
     set [Year] = 'ccc', [ProjectName] = '', [DeclaringUnits] = '', [ProjectType] = '092', [StartDate] = '1900-01-01 0:00:00', [EndDate] = '1900-01-01 0:00:00', [TotalMoney] = '2', [Remark] = '111' where  ID =  '100005'
2013-08-30 09:59:23,292 [2960] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:23,293 [2960] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100006'
2013-08-30 09:59:23,294 [2960] DEBUG Mms - update 
        mms_test
     set [Year] = 'ddd', [ProjectName] = '', [DeclaringUnits] = '', [ProjectType] = '', [StartDate] = '1900-01-01 0:00:00', [EndDate] = '1900-01-01 0:00:00', [TotalMoney] = '22', [Remark] = '222' where  ID =  '100006'
2013-08-30 09:59:23,298 [2960] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:23,298 [2960] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100001'
2013-08-30 09:59:23,300 [2960] DEBUG Mms - update 
        mms_test
     set [Year] = 'aaa', [ProjectName] = 'bb', [DeclaringUnits] = '', [ProjectType] = '', [StartDate] = '1900-01-01 0:00:00', [EndDate] = '1900-01-01 0:00:00', [TotalMoney] = '1', [Remark] = '333' where  ID =  '100001'
2013-08-30 09:59:27,554 [14356] DEBUG Servicemms_test - 获取新主键
2013-08-30 09:59:27,561 [14356] DEBUG Mms - select isnull(max(ID),0) from mms_test  where 1 = 1 
2013-08-30 09:59:33,526 [5924] DEBUG Servicemms_test - 编辑记录
2013-08-30 09:59:33,526 [5924] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:33,527 [5924] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100007'
2013-08-30 09:59:33,536 [5924] DEBUG Mms - insert into 
        mms_test
    ([ID]) values('100007')
2013-08-30 09:59:36,890 [5924] DEBUG Servicemms_test - 获取新主键
2013-08-30 09:59:36,890 [5924] DEBUG Mms - select isnull(max(ID),0) from mms_test  where 1 = 1 
2013-08-30 09:59:39,589 [5924] DEBUG Servicemms_test - 编辑记录
2013-08-30 09:59:39,589 [5924] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:39,590 [5924] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100008'
2013-08-30 09:59:39,591 [5924] DEBUG Mms - insert into 
        mms_test
    ([ID]) values('100008')
2013-08-30 09:59:50,793 [5924] DEBUG Servicemms_test - 编辑记录
2013-08-30 09:59:50,793 [5924] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:50,794 [5924] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100008'
2013-08-30 09:59:50,801 [5924] DEBUG Mms - delete from 
        mms_test
     where  ID =  '100008'
2013-08-30 09:59:50,802 [5924] DEBUG Servicemms_test - 获取动态对象
2013-08-30 09:59:50,802 [5924] DEBUG Mms - select 
        mms_test
    .* from 
        mms_test
     where  ID =  '100007'
2013-08-30 09:59:50,802 [5924] DEBUG Mms - delete from 
        mms_test
     where  ID =  '100007'
2013-08-30 09:59:51,891 [18204] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/testabc/Index','/Mms/testabc')
2013-08-30 09:59:51,893 [18204] DEBUG Servicesys_code - 获取动态列表
2013-08-30 09:59:51,893 [18204] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 09:59:53,909 [2960] DEBUG Servicemms_test - 获取动态列表
2013-08-30 09:59:53,909 [2960] DEBUG Mms - select top 20 * from mms_test order by ID
2013-08-30 09:59:53,910 [2960] DEBUG Mms - select count(*) from ( select * from mms_test ) tb_temp
2013-08-30 10:02:16,085 [17108] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/report/warehousequery')
2013-08-30 10:02:16,097 [17108] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:02:16,098 [17108] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:02:18,569 [13272] DEBUG Mms - 
Select mms_warehouseStock.*,mms_material.MaterialName,mms_material.Model,mms_warehouse.WarehouseName,
    mms_warehouseStock.WarehouseCode+'_'+mms_material.MaterialCode as id,'' AS name
From mms_warehouseStock
Left join mms_warehouse on mms_warehouseStock.WarehouseCode=mms_warehouse.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStock.MaterialCode
Where mms_warehouse.ProjectCode='201306030001' 

                
2013-08-30 10:02:37,654 [17536] DEBUG Servicemms_test - 获取动态列表
2013-08-30 10:02:37,654 [17536] DEBUG Mms - select * from mms_test order by ID
2013-08-30 10:03:02,716 [17536] DEBUG Servicemms_test - 获取动态列表
2013-08-30 10:03:02,716 [17536] DEBUG Mms - select * from mms_test order by ID
2013-08-30 10:03:15,136 [13272] DEBUG Servicemms_test - 获取动态列表
2013-08-30 10:03:15,136 [13272] DEBUG Mms - select * from mms_test order by ID
2013-08-30 10:06:35,714 [9304] DEBUG Servicemms_test - 获取新主键
2013-08-30 10:06:35,714 [9304] DEBUG Mms - select isnull(max(ID),0) from mms_test  where 1 = 1 
2013-08-30 10:23:52,817 [948] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-08-30 10:23:52,823 [948] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:23:52,829 [948] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:23:52,830 [948] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:23:52,830 [948] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2013-08-30 10:23:54,863 [6816] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 10:23:54,864 [6816] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 10:23:54,914 [6816] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 10:23:59,604 [948] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/receive/edit')
2013-08-30 10:23:59,616 [948] DEBUG Servicemms_receive - 获取实体对象
2013-08-30 10:23:59,617 [948] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201307020014'
2013-08-30 10:23:59,624 [948] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-08-30 10:23:59,656 [948] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:23:59,658 [948] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:23:59,661 [948] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:23:59,661 [948] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201307020014'and ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:23:59,664 [948] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:23:59,665 [948] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201307020014'and ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:23:59,668 [948] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:23:59,668 [948] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:24:00,338 [948] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:24:00,339 [948] DEBUG Sys - select Text as value,Text as text from sys_code where  CodeType =  'MeasureUnit'
2013-08-30 10:24:00,339 [948] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:24:00,340 [948] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2013-08-30 10:24:00,340 [948] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:24:00,340 [948] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'PayType'
2013-08-30 10:24:00,341 [948] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:24:00,341 [948] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:24:00,343 [948] DEBUG Servicesys_code - 获取字段
2013-08-30 10:24:00,343 [948] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'SupplyType'and IsEnable =  'True'and IsDefault =  'True'
2013-08-30 10:24:00,345 [948] DEBUG Servicesys_code - 获取字段
2013-08-30 10:24:00,345 [948] DEBUG Sys - select top 1 Code from sys_code where  CodeType =  'PayType'and IsEnable =  'True'and IsDefault =  'True'
2013-08-30 10:24:03,547 [13620] DEBUG ServiceModelBase - 获取动态列表
2013-08-30 10:24:03,548 [13620] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00301') order by MerchantsCode
2013-08-30 10:24:05,094 [13620] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 10:24:05,095 [13620] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201307020014' order by A.MaterialCode
2013-08-30 10:37:34,337 [9972] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 10:37:34,368 [9972] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 10:37:34,375 [9972] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 10:37:34,376 [9972] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 10:37:34,817 [17296] DEBUG Servicemms_receive - 获取实体对象
2013-08-30 10:37:34,832 [2052] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 10:37:34,838 [2052] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201307020016' order by A.MaterialCode
2013-08-30 10:37:34,845 [17296] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201307020016'
2013-08-30 10:37:34,958 [17296] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-08-30 10:37:34,986 [17296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:34,988 [17296] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:34,993 [17296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:34,994 [17296] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201307020016'and ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:34,997 [17296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:34,997 [17296] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201307020016'and ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:35,000 [17296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:35,000 [17296] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:36,247 [13296] DEBUG ServiceModelBase - 获取动态列表
2013-08-30 10:37:36,247 [13296] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00305') order by MerchantsCode
2013-08-30 10:37:36,501 [6172] DEBUG ServiceModelBase - 获取动态列表
2013-08-30 10:37:36,501 [6172] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00305') order by MerchantsCode
2013-08-30 10:37:39,091 [13296] DEBUG Servicemms_receive - 获取实体对象
2013-08-30 10:37:39,091 [13296] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201307020022'
2013-08-30 10:37:39,092 [13296] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-08-30 10:37:39,092 [13296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:39,093 [13296] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:39,093 [13296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:39,093 [13296] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201307020022'and ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:39,095 [13296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:39,095 [13296] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201307020022'and ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:39,097 [13296] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:39,097 [13296] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:39,438 [17296] DEBUG ServiceModelBase - 获取动态列表
2013-08-30 10:37:39,439 [17296] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00303') order by MerchantsCode
2013-08-30 10:37:39,757 [13296] DEBUG ServiceModelBase - 获取动态列表
2013-08-30 10:37:39,757 [13296] DEBUG Mms - select 
    MerchantsCode   as   value,MerchantsName   as   text
   from 
    mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode
   where  MerchantsCode in ('CG00303') order by MerchantsCode
2013-08-30 10:37:40,545 [4652] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 10:37:40,545 [4652] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201307020022' order by A.MaterialCode
2013-08-30 10:37:41,767 [4652] DEBUG Servicemms_receive - 获取实体对象
2013-08-30 10:37:41,768 [4652] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201307020024'
2013-08-30 10:37:41,769 [4652] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-08-30 10:37:41,769 [4652] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:41,769 [4652] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:41,769 [4652] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:41,769 [4652] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201307020024'and ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:41,771 [4652] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:41,771 [4652] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201307020024'and ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:41,773 [4652] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:41,773 [4652] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:42,723 [11676] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 10:37:42,723 [11676] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201307020024' order by A.MaterialCode
2013-08-30 10:37:43,662 [9812] DEBUG Servicemms_receive - 获取实体对象
2013-08-30 10:37:43,662 [9812] DEBUG Mms - select mms_receive.* from mms_receive where  BillNo =  '201307020022'
2013-08-30 10:37:43,663 [9812] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-08-30 10:37:43,663 [9812] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:43,663 [9812] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:43,664 [9812] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:43,664 [9812] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo < '201307020022'and ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:43,664 [9812] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:43,664 [9812] DEBUG Mms - select top 1 BillNo from mms_receive where  BillNo >  '201307020022'and ProjectCode =  '201306030001' order by BillNo
2013-08-30 10:37:43,665 [9812] DEBUG Servicemms_receive - 获取字段
2013-08-30 10:37:43,665 [9812] DEBUG Mms - select top 1 BillNo from mms_receive where  ProjectCode =  '201306030001' order by BillNo desc
2013-08-30 10:37:44,715 [11676] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 10:37:44,715 [11676] DEBUG Mms - select 
        A.*, B.MaterialName,B.Model,B.Material
     from 
        mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
     where  BillNo =  '201307020022' order by A.MaterialCode
2013-08-30 10:57:08,830 [12244] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-08-30 10:57:08,844 [12244] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:57:08,850 [12244] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:57:08,851 [12244] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:57:08,852 [12244] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 10:57:08,852 [12244] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:57:08,853 [12244] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2013-08-30 10:57:09,961 [12244] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:57:09,962 [12244] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-08-30 10:57:09,971 [12244] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:57:09,973 [12244] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-08-30 10:57:13,797 [6132] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:13,797 [6132] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 10:57:13,856 [6132] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 10:57:28,213 [12244] DEBUG Servicesys_user - 获取实体对象
2013-08-30 10:57:28,214 [12244] DEBUG Sys - select sys_user.* from sys_user where  UserCode =  'lhs'and Password =  'lhs'and IsEnable =  'True'
2013-08-30 10:57:28,222 [12244] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'lhs' 
2013-08-30 10:57:28,907 [12244] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('lhs','刘会胜','LHS-PC','ILData[0]/localhost','福建省厦门市','2013-08-30 10:57:28')
2013-08-30 10:57:28,977 [12244] DEBUG Servicemms_project - 获取实体对象
2013-08-30 10:57:28,978 [12244] DEBUG Mms - select mms_project.* from mms_project where  ProjectCode =  '201306030001'
2013-08-30 10:57:29,155 [6132] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 10:57:32,205 [7012] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 10:57:36,304 [9300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-08-30 10:57:37,485 [7012] DEBUG Servicesys_menu - 获取动态列表
2013-08-30 10:57:37,485 [7012] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-08-30 10:57:40,476 [7012] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-08-30 10:57:40,478 [7012] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:57:40,479 [7012] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:57:40,479 [7012] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:57:40,479 [7012] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 10:57:40,480 [7012] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:57:40,480 [7012] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2013-08-30 10:57:40,500 [7012] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:57:40,501 [7012] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-08-30 10:57:40,502 [7012] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:57:40,503 [7012] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-08-30 10:57:41,111 [7664] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:41,111 [7664] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 10:57:41,113 [7664] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 10:57:52,339 [2288] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:52,339 [2288] DEBUG Mms - select top 20 
        *
     from 
        test_user
     order by UserCode
2013-08-30 10:57:52,340 [2288] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:54,833 [6132] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:54,834 [6132] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 40
2013-08-30 10:57:54,835 [6132] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:55,136 [2188] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:55,137 [2188] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 41 and 60
2013-08-30 10:57:55,138 [2188] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:55,657 [2288] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:55,657 [2288] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 61 and 80
2013-08-30 10:57:55,658 [2288] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:56,248 [6132] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:56,249 [6132] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 81 and 100
2013-08-30 10:57:56,250 [6132] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:56,617 [12036] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:56,617 [12036] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 101 and 120
2013-08-30 10:57:56,618 [12036] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:56,732 [10072] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:56,733 [10072] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 121 and 140
2013-08-30 10:57:56,734 [10072] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:57:57,001 [2188] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:57:57,001 [2188] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent 
        *
    , row_number() over (order by UserCode) as FLUENTDATA_ROWNUMBER
									 from 
        test_user
    
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 141 and 160
2013-08-30 10:57:57,002 [2188] DEBUG Mms - select count(*) from ( select 
        *
     from 
        test_user
     ) tb_temp
2013-08-30 10:58:50,192 [17752] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-08-30 10:58:50,195 [17752] DEBUG Servicesys_user - 获取动态列表
2013-08-30 10:58:50,195 [17752] DEBUG Sys - select UserCode,UserName from sys_user
2013-08-30 10:58:50,196 [17752] DEBUG Servicesys_organize - 获取动态列表
2013-08-30 10:58:50,196 [17752] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-08-30 10:58:51,498 [10072] DEBUG Servicesys_role - 获取实体列表
2013-08-30 10:58:51,504 [10072] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-08-30 10:58:53,232 [17752] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 10:58:53,235 [17752] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 10:58:53,286 [15328] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 10:58:53,290 [17752] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 10:58:53,292 [15328] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 10:59:04,240 [17752] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 10:59:04,245 [17752] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 10:59:04,249 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 10:59:04,249 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-08-30 10:59:04,250 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 10:59:04,250 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 10:59:04,251 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 10:59:04,251 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 10:59:04,252 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 10:59:04,252 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 10:59:04,253 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 10:59:04,253 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 10:59:04,254 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 10:59:04,254 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 10:59:04,255 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 10:59:04,255 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 10:59:04,256 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 10:59:04,257 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 10:59:04,257 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 10:59:04,258 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 10:59:04,258 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 10:59:04,259 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 10:59:04,259 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 10:59:04,260 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 10:59:04,260 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 10:59:04,261 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 10:59:04,261 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 10:59:04,262 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 10:59:04,262 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 10:59:04,263 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 10:59:04,264 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 10:59:04,264 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 10:59:04,265 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 10:59:04,265 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 10:59:04,266 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 10:59:04,266 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 10:59:04,267 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 10:59:04,267 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 10:59:04,268 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 10:59:04,268 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 10:59:04,269 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 10:59:04,269 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 10:59:04,270 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 10:59:04,270 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 10:59:04,271 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 10:59:04,271 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 10:59:04,272 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 10:59:04,272 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 10:59:04,273 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 10:59:04,273 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 10:59:04,274 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 10:59:04,275 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 10:59:04,275 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 10:59:04,276 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 10:59:04,276 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 10:59:04,277 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 10:59:04,277 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 10:59:04,278 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 10:59:04,278 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 10:59:04,279 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 10:59:04,279 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 10:59:04,280 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 10:59:04,320 [17752] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 10:59:04,322 [17752] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 10:59:04,322 [17752] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2013-08-30 10:59:04,323 [17752] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2013-08-30 10:59:04,362 [17752] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 10:59:04,363 [17752] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 10:59:04,406 [17752] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 10:59:04,410 [17752] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 10:59:04,411 [17752] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 10:59:14,800 [17872] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-08-30 10:59:14,803 [17872] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:59:14,803 [17872] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:59:14,804 [17872] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:59:14,804 [17872] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 10:59:14,804 [17872] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:59:14,805 [17872] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2013-08-30 10:59:14,822 [17872] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:59:14,823 [17872] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-08-30 10:59:14,824 [17872] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:59:14,825 [17872] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-08-30 10:59:15,457 [9300] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:59:15,458 [9300] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 10:59:15,460 [9300] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 10:59:18,338 [15328] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 10:59:18,340 [15328] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 10:59:18,377 [17872] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 10:59:18,377 [17872] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 10:59:18,412 [15328] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 10:59:27,962 [17752] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 10:59:27,963 [17752] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 10:59:27,964 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 10:59:27,964 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-08-30 10:59:27,965 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 10:59:27,965 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 10:59:27,966 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 10:59:27,966 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 10:59:27,967 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 10:59:27,967 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 10:59:27,968 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 10:59:27,968 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 10:59:27,969 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 10:59:27,969 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 10:59:27,970 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 10:59:27,970 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 10:59:27,970 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 10:59:27,971 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 10:59:27,971 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 10:59:27,972 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 10:59:27,973 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 10:59:27,973 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 10:59:27,974 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 10:59:27,974 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 10:59:27,975 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 10:59:27,975 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 10:59:27,976 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 10:59:27,976 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 10:59:27,977 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 10:59:27,977 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 10:59:27,978 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 10:59:27,978 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 10:59:27,979 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 10:59:27,979 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 10:59:27,980 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 10:59:27,980 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 10:59:27,981 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 10:59:27,981 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 10:59:27,982 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 10:59:27,982 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 10:59:27,983 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 10:59:27,983 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 10:59:27,984 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 10:59:27,984 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 10:59:27,985 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 10:59:27,985 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 10:59:27,986 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 10:59:27,986 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 10:59:27,987 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 10:59:27,987 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 10:59:27,988 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 10:59:27,988 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 10:59:27,989 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 10:59:27,990 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 10:59:27,990 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 10:59:27,991 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 10:59:27,991 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 10:59:27,992 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 10:59:27,992 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 10:59:27,993 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 10:59:27,993 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 10:59:27,994 [17752] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 10:59:27,995 [17752] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 10:59:27,996 [17752] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 10:59:27,996 [17752] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2013-08-30 10:59:27,997 [17752] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2013-08-30 10:59:27,998 [17752] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 10:59:27,998 [17752] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 10:59:27,999 [17752] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 10:59:27,999 [17752] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 10:59:27,999 [17752] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 10:59:31,391 [6132] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-08-30 10:59:31,395 [6132] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:59:31,395 [6132] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:59:31,396 [6132] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:59:31,396 [6132] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 10:59:31,397 [6132] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:59:31,397 [6132] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2013-08-30 10:59:31,412 [6132] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:59:31,413 [6132] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-08-30 10:59:31,414 [6132] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:59:31,415 [6132] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-08-30 10:59:31,927 [11068] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:59:31,927 [11068] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 10:59:31,929 [11068] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 10:59:33,607 [11068] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 10:59:33,906 [15328] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 10:59:34,395 [9300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-08-30 10:59:34,397 [9300] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 10:59:34,397 [9300] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 10:59:34,398 [9300] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:59:34,398 [9300] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 10:59:34,398 [9300] DEBUG Servicesys_code - 获取动态列表
2013-08-30 10:59:34,398 [9300] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2013-08-30 10:59:34,431 [9300] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:59:34,432 [9300] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-08-30 10:59:34,432 [9300] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 10:59:34,433 [9300] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-08-30 10:59:35,107 [17752] DEBUG Servicemms_send - 获取动态列表
2013-08-30 10:59:35,108 [17752] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 10:59:35,110 [17752] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 10:59:37,877 [15328] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-08-30 10:59:37,880 [15328] DEBUG Servicesys_user - 获取动态列表
2013-08-30 10:59:37,880 [15328] DEBUG Sys - select UserCode,UserName from sys_user
2013-08-30 10:59:37,881 [15328] DEBUG Servicesys_organize - 获取动态列表
2013-08-30 10:59:37,881 [15328] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-08-30 10:59:38,113 [9300] DEBUG Servicesys_role - 获取实体列表
2013-08-30 10:59:38,114 [9300] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-08-30 10:59:39,601 [9300] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 10:59:39,603 [9300] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 10:59:39,641 [17752] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 10:59:39,642 [17752] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 10:59:39,673 [9300] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:00:06,556 [6132] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:00:06,558 [6132] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:00:06,597 [10072] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:00:06,598 [10072] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:00:06,629 [6132] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:01:18,684 [14448] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:01:18,686 [14448] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:01:18,762 [11048] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:01:18,762 [11048] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:01:18,763 [14448] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:01:32,471 [5320] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/testabc/Index','/Mms/testabc')
2013-08-30 11:01:32,475 [5320] DEBUG Servicesys_code - 获取动态列表
2013-08-30 11:01:32,476 [5320] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 11:01:33,093 [14448] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-08-30 11:01:33,096 [14448] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 11:01:33,097 [14448] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 11:01:33,098 [14448] DEBUG Servicesys_code - 获取动态列表
2013-08-30 11:01:33,098 [14448] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'SupplyType'
2013-08-30 11:01:34,142 [6132] DEBUG Servicemms_test - 获取动态列表
2013-08-30 11:01:34,143 [6132] DEBUG Mms - select top 20 * from mms_test order by ID
2013-08-30 11:01:34,178 [6132] DEBUG Mms - select count(*) from ( select * from mms_test ) tb_temp
2013-08-30 11:01:34,912 [11048] DEBUG Servicemms_receive - 获取动态列表
2013-08-30 11:01:34,913 [11048] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 11:01:34,915 [11048] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName
     from 
        mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 11:01:35,578 [10072] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-08-30 11:01:35,580 [10072] DEBUG Servicemms_warehouse - 获取动态列表
2013-08-30 11:01:35,580 [10072] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where  ProjectCode =  '201306030001'
2013-08-30 11:01:35,581 [10072] DEBUG Servicesys_code - 获取动态列表
2013-08-30 11:01:35,581 [10072] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'Pricing'
2013-08-30 11:01:35,582 [10072] DEBUG Servicesys_code - 获取动态列表
2013-08-30 11:01:35,582 [10072] DEBUG Sys - select Code as value,Text as text from sys_code where  CodeType =  'MaterialUse'
2013-08-30 11:01:35,603 [10072] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 11:01:35,604 [10072] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
2013-08-30 11:01:35,605 [10072] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-08-30 11:01:35,606 [10072] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'lhs'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'lhs'
)
order by ButtonSeq
2013-08-30 11:01:36,094 [9300] DEBUG Servicemms_send - 获取动态列表
2013-08-30 11:01:36,094 [9300] DEBUG Mms - select top 20 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' order by A.BillNo
2013-08-30 11:01:36,096 [9300] DEBUG Mms - select count(*) from ( select 
        A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName
     from 
        mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit
     where  A.ProjectCode =  '201306030001' ) tb_temp
2013-08-30 11:02:18,563 [6132] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:02:18,565 [6132] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:02:18,604 [10072] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:02:18,605 [10072] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:02:18,651 [6132] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:04:52,702 [7208] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:04:52,704 [7208] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:04:52,749 [11048] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:04:52,749 [11048] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:04:52,782 [7208] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:04:56,168 [10688] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 11:04:56,169 [10688] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 11:04:56,170 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 11:04:56,170 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 11:04:56,171 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 11:04:56,171 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 11:04:56,172 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 11:04:56,172 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 11:04:56,173 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 11:04:56,174 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 11:04:56,174 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 11:04:56,175 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 11:04:56,175 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 11:04:56,176 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 11:04:56,176 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 11:04:56,177 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 11:04:56,177 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 11:04:56,178 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 11:04:56,178 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 11:04:56,179 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 11:04:56,179 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 11:04:56,180 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 11:04:56,181 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 11:04:56,181 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 11:04:56,182 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 11:04:56,182 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 11:04:56,183 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 11:04:56,183 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 11:04:56,184 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 11:04:56,184 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 11:04:56,185 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 11:04:56,185 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 11:04:56,186 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 11:04:56,186 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 11:04:56,187 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 11:04:56,187 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 11:04:56,188 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 11:04:56,188 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 11:04:56,189 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 11:04:56,189 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 11:04:56,190 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 11:04:56,190 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 11:04:56,191 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 11:04:56,191 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 11:04:56,192 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 11:04:56,192 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 11:04:56,193 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 11:04:56,193 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 11:04:56,194 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 11:04:56,194 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 11:04:56,195 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 11:04:56,195 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 11:04:56,196 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 11:04:56,196 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 11:04:56,197 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 11:04:56,197 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 11:04:56,198 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 11:04:56,198 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 11:04:56,199 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 11:04:56,199 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 11:04:56,199 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 11:04:56,201 [10688] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 11:04:56,201 [10688] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 11:04:56,202 [10688] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 11:04:56,202 [10688] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 11:04:56,203 [10688] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 11:04:56,203 [10688] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 11:04:56,204 [10688] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 11:04:57,494 [11048] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:04:57,496 [11048] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:04:57,538 [7208] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:04:57,539 [7208] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:04:57,571 [11048] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:06:06,894 [12080] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:06:06,896 [12080] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:06:06,934 [16380] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:06:06,934 [16380] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:06:06,975 [12080] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:06:09,360 [11048] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 11:06:09,360 [11048] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 11:06:09,361 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 11:06:09,362 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-08-30 11:06:09,362 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 11:06:09,363 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 11:06:09,363 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 11:06:09,364 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 11:06:09,364 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 11:06:09,365 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 11:06:09,365 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 11:06:09,366 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 11:06:09,367 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 11:06:09,367 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 11:06:09,368 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 11:06:09,368 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 11:06:09,369 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 11:06:09,369 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 11:06:09,370 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 11:06:09,370 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 11:06:09,371 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 11:06:09,371 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 11:06:09,372 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 11:06:09,372 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 11:06:09,373 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 11:06:09,373 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 11:06:09,374 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 11:06:09,374 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 11:06:09,374 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 11:06:09,375 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 11:06:09,375 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 11:06:09,376 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 11:06:09,376 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 11:06:09,377 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 11:06:09,377 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 11:06:09,378 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 11:06:09,378 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 11:06:09,379 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 11:06:09,379 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 11:06:09,379 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 11:06:09,380 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 11:06:09,380 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 11:06:09,381 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 11:06:09,381 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 11:06:09,382 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 11:06:09,382 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 11:06:09,383 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 11:06:09,383 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 11:06:09,384 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 11:06:09,384 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 11:06:09,384 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 11:06:09,385 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 11:06:09,385 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 11:06:09,386 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 11:06:09,386 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 11:06:09,387 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 11:06:09,387 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 11:06:09,387 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 11:06:09,388 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 11:06:09,388 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 11:06:09,389 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 11:06:09,389 [11048] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 11:06:09,390 [11048] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 11:06:09,391 [11048] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 11:06:09,391 [11048] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 11:06:09,392 [11048] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 11:06:09,392 [11048] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 11:06:09,392 [11048] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 11:06:09,393 [11048] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 11:06:10,854 [7208] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:06:10,856 [7208] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:06:10,907 [16380] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:06:10,907 [16380] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:06:11,011 [7208] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:06:15,968 [10688] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 11:06:15,968 [10688] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 11:06:15,969 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 11:06:15,970 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-08-30 11:06:15,970 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 11:06:15,970 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 11:06:15,971 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 11:06:15,971 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 11:06:15,972 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 11:06:15,973 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 11:06:15,973 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 11:06:15,974 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 11:06:15,974 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 11:06:15,975 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 11:06:15,975 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 11:06:15,976 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 11:06:15,976 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 11:06:15,977 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 11:06:15,978 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 11:06:15,978 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 11:06:15,979 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 11:06:15,979 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 11:06:15,980 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 11:06:15,980 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 11:06:15,981 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 11:06:15,981 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 11:06:15,982 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 11:06:15,982 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 11:06:15,983 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 11:06:15,983 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 11:06:15,984 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 11:06:15,984 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 11:06:15,985 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 11:06:15,985 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 11:06:15,986 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 11:06:15,986 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 11:06:15,987 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 11:06:15,987 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 11:06:15,988 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 11:06:15,988 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 11:06:15,989 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 11:06:15,989 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 11:06:15,990 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 11:06:15,990 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 11:06:15,991 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 11:06:15,991 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 11:06:15,992 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 11:06:15,992 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 11:06:15,993 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 11:06:15,993 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 11:06:15,994 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 11:06:15,994 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 11:06:15,995 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 11:06:15,995 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 11:06:15,996 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 11:06:15,996 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 11:06:15,997 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 11:06:15,997 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 11:06:15,998 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 11:06:15,998 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 11:06:15,999 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 11:06:15,999 [10688] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 11:06:16,001 [10688] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 11:06:16,001 [10688] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 11:06:16,002 [10688] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 11:06:16,002 [10688] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 11:06:16,002 [10688] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2013-08-30 11:06:16,006 [10688] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 11:06:16,006 [10688] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 11:06:16,006 [10688] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 11:06:17,462 [7208] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:06:17,464 [7208] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:06:17,510 [11048] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:06:17,511 [11048] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:06:17,540 [7208] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:06:19,816 [12036] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 11:06:19,817 [12036] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 11:06:19,819 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 11:06:19,819 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 11:06:19,820 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 11:06:19,820 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 11:06:19,821 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 11:06:19,821 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 11:06:19,822 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 11:06:19,822 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 11:06:19,823 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 11:06:19,823 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 11:06:19,823 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 11:06:19,824 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 11:06:19,824 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 11:06:19,825 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 11:06:19,825 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 11:06:19,826 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 11:06:19,826 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 11:06:19,827 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 11:06:19,827 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 11:06:19,827 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 11:06:19,828 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 11:06:19,828 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 11:06:19,829 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 11:06:19,829 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 11:06:19,830 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 11:06:19,830 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 11:06:19,831 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 11:06:19,831 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 11:06:19,831 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 11:06:19,832 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 11:06:19,832 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 11:06:19,833 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 11:06:19,833 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 11:06:19,834 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 11:06:19,834 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 11:06:19,835 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 11:06:19,835 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 11:06:19,835 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 11:06:19,836 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 11:06:19,836 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 11:06:19,837 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 11:06:19,837 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 11:06:19,838 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 11:06:19,838 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 11:06:19,839 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 11:06:19,839 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 11:06:19,840 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 11:06:19,840 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 11:06:19,841 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 11:06:19,841 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 11:06:19,841 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 11:06:19,842 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 11:06:19,842 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 11:06:19,843 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 11:06:19,843 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 11:06:19,844 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 11:06:19,844 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 11:06:19,845 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 11:06:19,845 [12036] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 11:06:19,846 [12036] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 11:06:19,847 [12036] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 11:06:19,847 [12036] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 11:06:19,848 [12036] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 11:06:19,848 [12036] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2013-08-30 11:06:19,849 [12036] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 11:06:19,850 [12036] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 11:06:19,850 [12036] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 11:06:21,068 [7208] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:06:21,069 [7208] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:06:21,129 [17856] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:06:21,129 [17856] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:06:21,145 [7208] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:08:27,946 [2188] DEBUG Sys - select * from sys_button order by ButtonSeq
2013-08-30 11:08:27,948 [2188] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_s.ID) is null then -1 
            when max(tb2_s.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_s
left join sys_roleMenuButtonMap AS tb2_s ON tb2_s.MenuCode=tb1_s.MenuCode AND tb2_s.ButtonCode=tb1_s.ButtonCode AND tb2_s.RoleCode='super'
where tb1_s.MenuCode = A.MenuCode and  tb1_s.ButtonCode = 's'  
)as 'btn_s' ,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_export.ID) is null then -1 
            when max(tb2_export.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_export
left join sys_roleMenuButtonMap AS tb2_export ON tb2_export.MenuCode=tb1_export.MenuCode AND tb2_export.ButtonCode=tb1_export.ButtonCode AND tb2_export.RoleCode='super'
where tb1_export.MenuCode = A.MenuCode and  tb1_export.ButtonCode = 'export'  
)as 'btn_export' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' ,(
select case when max(tb1_test.ID) is null then -1 
            when max(tb2_test.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_test
left join sys_roleMenuButtonMap AS tb2_test ON tb2_test.MenuCode=tb1_test.MenuCode AND tb2_test.ButtonCode=tb1_test.ButtonCode AND tb2_test.RoleCode='super'
where tb1_test.MenuCode = A.MenuCode and  tb1_test.ButtonCode = 'test'  
)as 'btn_test' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2013-08-30 11:08:27,993 [12780] DEBUG Servicesys_permission - 获取动态列表
2013-08-30 11:08:27,993 [12780] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2013-08-30 11:08:28,016 [2188] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2013-08-30 11:08:31,394 [12780] DEBUG Servicesys_role - 修改角色菜单权限
2013-08-30 11:08:31,394 [12780] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2013-08-30 11:08:31,395 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2013-08-30 11:08:31,395 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2013-08-30 11:08:31,396 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2013-08-30 11:08:31,396 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2013-08-30 11:08:31,397 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2013-08-30 11:08:31,397 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2013-08-30 11:08:31,398 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2013-08-30 11:08:31,398 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2013-08-30 11:08:31,398 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2013-08-30 11:08:31,399 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2013-08-30 11:08:31,399 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2013-08-30 11:08:31,400 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2013-08-30 11:08:31,400 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2013-08-30 11:08:31,400 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2013-08-30 11:08:31,401 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2013-08-30 11:08:31,401 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2013-08-30 11:08:31,402 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2013-08-30 11:08:31,402 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2013-08-30 11:08:31,402 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2013-08-30 11:08:31,403 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2013-08-30 11:08:31,403 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2013-08-30 11:08:31,403 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2013-08-30 11:08:31,404 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2013-08-30 11:08:31,404 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2013-08-30 11:08:31,404 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2013-08-30 11:08:31,405 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2013-08-30 11:08:31,405 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2013-08-30 11:08:31,405 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2013-08-30 11:08:31,406 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','02')
2013-08-30 11:08:31,406 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0201')
2013-08-30 11:08:31,406 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0202')
2013-08-30 11:08:31,407 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0203')
2013-08-30 11:08:31,407 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2013-08-30 11:08:31,407 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2013-08-30 11:08:31,408 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2013-08-30 11:08:31,408 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2013-08-30 11:08:31,408 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2013-08-30 11:08:31,409 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2013-08-30 11:08:31,409 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2013-08-30 11:08:31,409 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','03')
2013-08-30 11:08:31,410 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0301')
2013-08-30 11:08:31,410 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0302')
2013-08-30 11:08:31,410 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0303')
2013-08-30 11:08:31,411 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','0304')
2013-08-30 11:08:31,411 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2013-08-30 11:08:31,411 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2013-08-30 11:08:31,412 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2013-08-30 11:08:31,412 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2013-08-30 11:08:31,412 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2013-08-30 11:08:31,413 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','110')
2013-08-30 11:08:31,413 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2013-08-30 11:08:31,413 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2013-08-30 11:08:31,414 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2013-08-30 11:08:31,414 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2013-08-30 11:08:31,415 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2013-08-30 11:08:31,415 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2013-08-30 11:08:31,415 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2013-08-30 11:08:31,416 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2013-08-30 11:08:31,416 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2013-08-30 11:08:31,417 [12780] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2013-08-30 11:08:31,420 [12780] DEBUG Servicesys_role - 修改角色菜单按钮权限
2013-08-30 11:08:31,421 [12780] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2013-08-30 11:08:31,421 [12780] DEBUG Servicesys_role - 修改角色数据权限
2013-08-30 11:08:31,422 [12780] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2013-08-30 11:08:31,422 [12780] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2013-08-30 11:08:31,423 [12780] DEBUG Servicesys_role - 修改角色数据列权限
2013-08-30 11:08:31,423 [12780] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2013-08-30 11:08:31,424 [12780] DEBUG Sys - insert into sys_roleMenuColumnMap([RoleCode],[MenuCode],[IsReject],[FieldName]) values('super','1001','True','BillNo')
2013-08-30 11:23:13,586 [12000] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:13,617 [12000] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:13,625 [12000] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:13,625 [12000] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:14,119 [16540] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 11:23:22,469 [17860] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:22,504 [17860] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:22,511 [17860] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:22,512 [17860] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:23:22,864 [12928] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 11:25:16,385 [12872] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-08-30 11:25:17,821 [220] DEBUG Servicesys_menu - 获取动态列表
2013-08-30 11:25:17,840 [220] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-08-30 11:25:27,145 [11888] DEBUG Servicesys_menu - 编辑记录
2013-08-30 11:25:27,171 [11888] DEBUG Servicesys_menu - 获取动态对象
2013-08-30 11:25:27,176 [11888] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9920'
2013-08-30 11:25:27,263 [11888] ERROR Servicesys_menu - 编辑记录失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Models.sys_menuService.OnBeforEditDetail(EditEventArgs arg) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Models\sys_menu.cs:行号 16
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass40.<Edit>b__3d() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 117
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-08-30 11:25:34,370 [11888] ERROR /api/sys/menu/edit - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , sys_menuService , Object , RequestWrapper , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Areas.Sys.Controllers.MenuApiController.Edit(Object data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Controllers\MenuController.cs:行号 68
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-08-30 11:25:47,011 [12872] DEBUG Servicesys_menu - 编辑记录
2013-08-30 11:25:47,011 [12872] DEBUG Servicesys_menu - 获取动态对象
2013-08-30 11:25:47,016 [12872] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9920'
2013-08-30 11:25:54,491 [12872] ERROR Servicesys_menu - 编辑记录失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Models.sys_menuService.OnBeforEditDetail(EditEventArgs arg) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Models\sys_menu.cs:行号 16
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass40.<Edit>b__3d() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 117
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-08-30 11:25:58,397 [12872] ERROR /api/sys/menu/edit - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , sys_menuService , Object , RequestWrapper , Object )
   在 Zephyr.Areas.Sys.Controllers.MenuApiController.Edit(Object data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Controllers\MenuController.cs:行号 68
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-08-30 11:25:58,816 [10220] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 11:26:02,688 [10652] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 11:26:03,519 [12872] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-08-30 11:26:04,686 [12872] DEBUG Servicesys_menu - 获取动态列表
2013-08-30 11:26:04,686 [12872] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-08-30 11:27:10,736 [11888] DEBUG Servicesys_menu - 编辑记录
2013-08-30 11:27:10,736 [11888] DEBUG Servicesys_menu - 获取动态对象
2013-08-30 11:27:10,737 [11888] DEBUG Sys - select 
        sys_menu
    .* from 
        sys_menu
     where  MenuCode =  '9920'
2013-08-30 11:27:29,457 [11888] ERROR Servicesys_menu - 编辑记录失败
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Models.sys_menuService.OnBeforEditDetail(EditEventArgs arg) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Models\sys_menu.cs:行号 16
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass40.<Edit>b__3d() 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 117
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-08-30 11:27:29,474 [11888] ERROR /api/sys/menu/edit - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(RequestWrapper formWrapper, RequestWrapper listWrapper, JObject data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 68
   在 CallSite.Target(Closure , CallSite , sys_menuService , Object , RequestWrapper , Object )
   在 Zephyr.Areas.Sys.Controllers.MenuApiController.Edit(Object data) 位置 g:\02.进行项目\纵云框架产品\Zephyr.Web-原始版\Zephyr.Web\Areas\Sys\Controllers\MenuController.cs:行号 68
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-08-30 11:28:55,525 [17860] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:28:55,556 [17860] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:28:55,563 [17860] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:28:55,564 [17860] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 11:28:56,094 [17084] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 22:38:06,325 [16692] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:38:06,357 [16692] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:38:06,364 [16692] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:38:06,365 [16692] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:38:06,947 [12532] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 22:38:12,844 [12532] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 22:38:22,299 [8804] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-08-30 22:38:23,064 [12532] DEBUG Servicesys_menu - 获取动态列表
2013-08-30 22:38:23,083 [12532] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-08-30 22:38:32,791 [12808] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 22:38:32,797 [12808] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 22:38:32,801 [12808] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 22:38:55,645 [15020] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '04060101'
2013-08-30 22:39:00,518 [13380] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '04060101'
2013-08-30 22:39:07,034 [5656] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '04060101'
2013-08-30 22:54:38,563 [7632] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:54:38,597 [7632] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:54:38,603 [7632] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:54:38,604 [7632] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:54:38,921 [17584] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 22:54:38,935 [17584] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 22:54:38,953 [17584] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 22:56:08,961 [7632] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:56:08,995 [7632] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:56:09,002 [7632] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:56:09,002 [7632] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:56:10,458 [16404] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '040601'
2013-08-30 22:56:12,718 [16456] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '040601'
2013-08-30 22:56:16,358 [16404] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '04060101'
2013-08-30 22:57:43,130 [6352] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:57:43,163 [6352] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:57:43,170 [6352] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:57:43,170 [6352] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-08-30 22:57:43,407 [17548] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 22:57:43,424 [17548] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 22:57:43,447 [17548] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 22:58:05,487 [10628] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 22:58:05,489 [10628] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 22:58:05,489 [10628] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 22:59:30,479 [12456] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 22:59:30,481 [12456] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 22:59:30,482 [12456] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 22:59:55,206 [12428] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 22:59:55,209 [12428] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 22:59:55,209 [12428] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:02:17,403 [17644] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:02:17,405 [17644] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:02:17,406 [17644] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:03:02,635 [12368] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:03:02,638 [12368] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:03:02,638 [12368] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:03:05,747 [12368] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_organizeRoleMap B on B.RoleCode = A.RoleCode and B.OrganizeCode = '0401'
2013-08-30 23:05:01,965 [11400] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:05:01,967 [11400] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:05:01,967 [11400] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:32:20,640 [14540] DEBUG Servicesys_organize - 编辑记录
2013-08-30 23:32:20,674 [14540] DEBUG Servicesys_organize - 获取动态对象
2013-08-30 23:32:20,686 [14540] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0406010101'
2013-08-30 23:32:20,725 [14540] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '04060101', [OrganizeCode] = '0406010101', [OrganizeName] = 'aaa', [Description] = 'bbb', [UpdatePerson] = '刘会胜', [UpdateDate] = '2013-08-30 23:32:20' where  OrganizeCode =  '0406010101'
2013-08-30 23:32:20,739 [14540] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[Description],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('04060101','0406010101','aaa','bbb','刘会胜','2013-08-30 23:32:20','刘会胜','2013-08-30 23:32:20')
2013-08-30 23:32:20,770 [14540] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:32:20,771 [14540] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:33:08,793 [16016] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:33:08,795 [16016] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:33:08,796 [16016] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:33:13,706 [12476] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0406010101'
2013-08-30 23:33:13,712 [12476] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0406010101'
2013-08-30 23:33:13,713 [12476] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:33:13,714 [12476] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:33:20,550 [16016] DEBUG Servicesys_organize - 编辑记录
2013-08-30 23:33:20,551 [16016] DEBUG Servicesys_organize - 获取动态对象
2013-08-30 23:33:20,551 [16016] DEBUG Sys - select 
        sys_organize
    .* from 
        sys_organize
     where  OrganizeCode =  '0406010101'
2013-08-30 23:33:20,552 [16016] DEBUG Sys - update 
        sys_organize
     set [ParentCode] = '04060101', [OrganizeCode] = '0406010101', [OrganizeName] = 'aa', [UpdatePerson] = '刘会胜', [UpdateDate] = '2013-08-30 23:33:20' where  OrganizeCode =  '0406010101'
2013-08-30 23:33:20,557 [16016] DEBUG Sys - insert into 
        sys_organize
    ([ParentCode],[OrganizeCode],[OrganizeName],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('04060101','0406010101','aa','刘会胜','2013-08-30 23:33:20','刘会胜','2013-08-30 23:33:20')
2013-08-30 23:33:20,560 [16016] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:33:20,560 [16016] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:37:01,327 [8968] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:37:01,329 [8968] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:37:01,330 [8968] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:49:24,794 [15044] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 23:49:28,714 [14540] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 23:49:29,175 [15824] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:49:29,177 [15824] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:49:29,177 [15824] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:50:28,904 [15044] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 23:50:29,202 [7700] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 23:50:29,617 [14540] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:50:29,618 [14540] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:50:29,618 [14540] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:50:39,639 [1048] DEBUG Sys - select sys_organize.* from sys_organize where  ParentCode =  '0406010101'
2013-08-30 23:50:39,640 [1048] DEBUG Sys - delete from sys_organize where  OrganizeCode =  '0406010101'
2013-08-30 23:50:39,678 [1048] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:50:39,678 [1048] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:51:15,890 [15824] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:51:15,891 [15824] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:51:15,892 [15824] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:51:25,707 [16272] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 23:51:26,449 [14756] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 23:51:26,898 [14540] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:51:26,901 [14540] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:51:26,901 [14540] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:51:43,179 [17612] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 23:51:43,377 [14540] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 23:51:43,885 [15824] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:51:43,906 [15824] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:51:43,906 [15824] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:51:53,014 [1048] DEBUG Sys - select * from sys_userSetting where UserCode='lhs'
2013-08-30 23:51:53,203 [14540] DEBUG Sys - 
--角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'lhs' --用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  --机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'lhs'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-08-30 23:51:53,964 [11124] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:51:53,975 [11124] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:51:53,976 [11124] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:52:05,624 [1048] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:52:05,626 [1048] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:52:05,627 [1048] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:53:32,696 [9232] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:53:32,698 [9232] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:53:32,698 [9232] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:55:10,854 [14756] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:55:10,856 [14756] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:55:10,856 [14756] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:55:44,403 [15044] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:55:44,405 [15044] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:55:44,406 [15044] DEBUG Sys - select sys_organize.* from sys_organize
2013-08-30 23:56:11,567 [16272] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'lhs'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-08-30 23:56:11,569 [16272] DEBUG Servicesys_organize - 获取实体列表
2013-08-30 23:56:11,569 [16272] DEBUG Sys - select sys_organize.* from sys_organize
